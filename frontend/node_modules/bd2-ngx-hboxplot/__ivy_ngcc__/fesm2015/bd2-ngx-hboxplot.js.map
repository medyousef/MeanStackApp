{"version":3,"file":"bd2-ngx-hboxplot.js","sources":["../../../projects/bd2-ngx-hboxplot/src/lib/d3service/d3.service.ts","../../../projects/bd2-ngx-hboxplot/src/lib/d3service/index.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-plot/hbox-plot.dom.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-utils/box-dom.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-utils/box-util.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-utils/color-palette.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-utils/smart-rounding.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-plot/hbox-plot.component.ts","../../../projects/bd2-ngx-hboxplot/src/lib/bd2-ngx-hboxplot.module.ts","../../../projects/bd2-ngx-hboxplot/src/public-api.ts","../../../projects/bd2-ngx-hboxplot/src/bd2-ngx-hboxplot.ts"],"names":[],"mappings":"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","sourcesContent":["import * as d3lib from 'd3';\r\n\r\nexport type D3 = typeof d3lib;\r\nexport const d3 = d3lib;\r\n\r\n/**\r\n D3 integration was originally based on the code for npm library: d3-ng2-service\r\n by Tom Wanzek, https://github.com/tomwanzek/d3-ng2-service.\r\n\r\n That package was used during developement and then converted into inline service\r\n to reduce the dependencies and boundle size.\r\n\r\n At some point, I moved to to simpler dependency on d3:\r\n npm install --save d3\r\n npm install --save-dev @types/d3\r\n\r\n and removed the parts from d3-modules.ts as they were causing errors\r\n (not sure how to fix them and also one dependency is easier to maintain).\r\n */\r\n","export * from './d3.service';\r\n\r\n/*\r\n// that has been removed after importing a single d3 dependency\r\n\r\nexport {\r\n  // d3-array\r\n  Bin,\r\n  Bisector,\r\n  HistogramGenerator,\r\n  Numeric,\r\n  ThresholdArrayGenerator,\r\n  ThresholdCountGenerator,\r\n  // d3-axis\r\n  Axis,\r\n  AxisContainerElement,\r\n  AxisScale,\r\n  AxisTimeInterval,\r\n  // d3-scale\r\n  InterpolatorFactory,\r\n  ScaleBand,\r\n  ScaleIdentity,\r\n  ScaleLinear,\r\n  ScaleLogarithmic,\r\n  ScaleOrdinal,\r\n  ScalePoint,\r\n  ScalePower,\r\n  ScaleQuantile,\r\n  ScaleQuantize,\r\n  ScaleSequential,\r\n  ScaleThreshold,\r\n  ScaleTime,\r\n\r\n  // d3-selection\r\n  ArrayLike,\r\n  BaseEvent,\r\n  BaseType,\r\n  ContainerElement,\r\n  EnterElement,\r\n  Local,\r\n  NamespaceLocalObject,\r\n  NamespaceMap,\r\n  Selection,\r\n  SelectionFn,\r\n  TransitionLike,\r\n  ValueFn,\r\n  // d3-selection-multi\r\n  ValueMap,\r\n  // d3-shape\r\n  Arc,\r\n  Area,\r\n  DefaultArcObject,\r\n  Line,\r\n  Pie,\r\n  PieArcDatum,\r\n  RadialArea,\r\n  RadialLine,\r\n  Series,\r\n  SeriesPoint,\r\n  Stack,\r\n  Symbol,\r\n  SymbolType,\r\n  // d3-transition\r\n  Transition\r\n} from './d3-modules';\r\n\r\n\r\n */\r\n","// import {Transition} from 'd3-transition';\nimport {Axis} from 'd3-axis';\nimport {ScaleBand, ScaleLinear} from 'd3-scale';\nimport {Selection, Transition} from 'd3';\n\n\nexport class LookAndFeel {\n\n  vMargin = 25;\n  hMarginL = 20;\n  hMarginR = 15;\n  rowWidth = 30;\n  rowGap = 0.2;\n\n  transitionTime = 600;\n\n  boxStrokeWidth = '2px';\n  boxFillOpacity = 0.35;\n  meanStrokeWidth = '4px';\n\n  labelFont = '12px';\n  labelFillOpacity = 0.35;\n  backLabelOpacity = 0.30;\n\n  backdropColor = 'white';\n  backdropOpacity = 1;\n\n  whiskerStrokeWidth = '1px';\n\n  outliersStrokeWidth = '1px';\n  outliersCircleRadius = 3;\n  outliersFillOpacity = 0.4;\n}\n\n\nexport let defualtLookAndFeel: () => LookAndFeel = function() {\n  return new LookAndFeel();\n};\n\nexport class GraphicContext {\n\n  /*transitionTime: number;\n\n   get transitionOn(): boolean {\n   return (this.transitionTime && this.transitionTime > 0);\n   };*/\n\n  transitionOn: boolean;\n  transition: Transition<any, any, any, any>;\n\n  workspaceWidth: number;\n  workspaceHeight: number;\n\n  axisWrapper: Selection<SVGGElement, any, null, undefined>;\n  xScale: ScaleLinear<number, number>;\n  xTopAxis: Axis<number | { valueOf(): number }>;\n  xBottomAxis: Axis<number | { valueOf(): number }>;\n\n  yScale: ScaleBand<string>;\n  yLeftAxis: Axis<string>;\n  yRightAxis: Axis<string>;\n\n  palette: string[];\n\n  dataWrapper: Selection<SVGGElement, any, null, undefined>;\n\n  tooltipWrapper: Selection<SVGGElement, any, null, undefined>;\n  tooltipText: Selection<SVGGElement, any, null, undefined>;\n  tooltipBox: Selection<SVGGElement, any, null, undefined>;\n\n  labelsWrapper: Selection<SVGGElement, any, null, undefined>;\n  backLabelsWrapper: Selection<SVGGElement, any, null, undefined>;\n  labelsTimers = [];\n}\n\nexport function offsetScaleValue(x: number, pixOffset: number, scale: ScaleLinear<number, number>) {\n  const r = scale.range();\n  const pos = scale(x) + pixOffset;\n  if (pos < r[0]) {\n    return r[0];\n  } else if (pos > r[1]) {\n    return r[1];\n  }\n  return pos;\n}\n\n\n","\nexport class BoxDefinition {\n  median: number;\n  mean: number;\n  fstQnt: number;\n  thrdQnt: number;\n  lowWskr: number;\n  highWskr: number;\n  outliers: number[] = [];\n  ix: number;\n  key: string;\n  label: string;\n  color: string;\n  hidden: boolean;\n}\n","import {BoxDefinition} from './box-dom';\nimport {d3} from '../d3service';\n\nexport class BoxUtil {\n\n  dataToBoxes(data: number[][]): BoxDefinition[] {\n    if (!data) {\n      return [];\n    }\n\n\n    return data.map((v, ix) => {\n      const b = this.datumToBox(v);\n      b.ix = ix;\n      b.key = (ix + 1) + '.';\n      return b;\n    });\n  }\n\n  datumToBox(data: number[]): BoxDefinition {\n\n    const box = new BoxDefinition();\n    if (!data || data.length === 0) {\n      return box;\n    }\n\n    data = data.sort(d3.ascending);\n    box.mean = d3.mean(data);\n    box.median = d3.median(data);\n    box.fstQnt = d3.quantile(data, 0.25);\n    box.thrdQnt = d3.quantile(data, 0.75);\n\n    const iqr = 1.5 * (box.thrdQnt - box.fstQnt);\n    box.lowWskr = box.fstQnt - iqr;\n    box.highWskr = box.thrdQnt + iqr;\n\n    for (let i = 0; i < data.length; i++) {\n      if (data[i] >= box.lowWskr) {\n        box.lowWskr = data[i];\n        break;\n      }\n    }\n\n    for (let i = data.length - 1; i >= 0; i--) {\n      if (data[i] <= box.highWskr) {\n        box.highWskr = data[i];\n        break;\n      }\n    }\n\n\n    box.outliers = data.filter(v => (v < box.lowWskr || v > box.highWskr));\n    return box;\n  }\n\n  mockEmptyValues(boxes: BoxDefinition[], missingVal: number) {\n    boxes.forEach(box => {\n      if (box.mean === undefined || box.mean === null) {\n        box.mean = missingVal;\n        box.median = missingVal;\n        box.fstQnt = missingVal;\n        box.thrdQnt = missingVal;\n        box.lowWskr = missingVal;\n        box.highWskr = missingVal;\n      }\n    });\n  }\n}\n","\r\nexport class BD2ColorPalette {\r\n\r\n  static schemeCategory10 = [\r\n    '#1f77b4',\r\n    '#ff7f0e',\r\n    '#2ca02c',\r\n    '#d62728',\r\n    '#9467bd',\r\n    '#8c564b',\r\n    '#e377c2',\r\n    '#7f7f7f',\r\n    '#bcbd22',\r\n    '#17becf'\r\n  ];\r\n\r\n  static schemeCategory20 = [\r\n'#1f77b4'\r\n, '#aec7e8'\r\n, '#ff7f0e'\r\n, '#ffbb78'\r\n, '#2ca02c'\r\n, '#98df8a'\r\n, '#d62728'\r\n, '#ff9896'\r\n, '#9467bd'\r\n, '#c5b0d5'\r\n, '#8c564b'\r\n, '#c49c94'\r\n, '#e377c2'\r\n, '#f7b6d2'\r\n, '#7f7f7f'\r\n, '#c7c7c7'\r\n, '#bcbd22'\r\n, '#dbdb8d'\r\n, '#17becf'\r\n, '#9edae5'];\r\n\r\n  static extendPalette(palette: string[] | ReadonlyArray<string>, size: number): string[] {\r\n\r\n    if (!palette || palette.length === 0) {\r\n      palette = ['black'];\r\n    }\r\n\r\n    const out = [];\r\n    for (let i = 0; i < size; i++) {\r\n      out.push(palette[i % palette.length]);\r\n    }\r\n    return out;\r\n\r\n  }\r\n\r\n  static palette(size: number): string[] {\r\n    // if (true) return BD2ColorPalette.extendPalette(['#1f77b4'], size);\r\n    if (size <= BD2ColorPalette.schemeCategory10.length) {\r\n      return BD2ColorPalette.extendPalette(BD2ColorPalette.schemeCategory10, size);\r\n    } else {\r\n      return BD2ColorPalette.extendPalette(BD2ColorPalette.schemeCategory20, size);\r\n    }\r\n\r\n  }\r\n}\r\n","\r\nexport class SmartRounder {\r\n\r\n  static round(value: number, base?: number): number {\r\n\r\n    base = base || value;\r\n    base = Math.abs(base);\r\n\r\n    if (base < 0.01) {\r\n      return value;\r\n    }\r\n\r\n    if (base < 1) {\r\n      return Math.round(value * 10000) / 10000;\r\n    }\r\n\r\n    if (base < 1000) {\r\n      return Math.round(value * 100) / 100;\r\n    }\r\n    return Math.round(value);\r\n  }\r\n\r\n\r\n}\r\n","import {\r\n  Component, OnInit, Input, AfterViewInit, OnChanges, OnDestroy, NgZone, ChangeDetectorRef,\r\n  ElementRef, SimpleChanges, ChangeDetectionStrategy, EventEmitter, Output\r\n} from '@angular/core';\r\nimport {D3, d3} from '../d3service';\r\n\r\nimport {Selection} from 'd3';\r\nimport {defualtLookAndFeel, GraphicContext, LookAndFeel, offsetScaleValue} from './hbox-plot.dom';\r\nimport {BoxDefinition} from '../hbox-utils/box-dom';\r\nimport {BoxUtil} from '../hbox-utils/box-util';\r\nimport {BD2ColorPalette} from '../hbox-utils/color-palette';\r\nimport {SmartRounder} from '../hbox-utils/smart-rounding';\r\n\r\n\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'bd2-ngx-hbox-plot',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <div class=\"hbox-plot\" [hidden]=\"hidden\"></div>\r\n  `,\r\n  styles: [\r\n      `\r\n      :host /deep/ .axisWrapper path {\r\n        stroke: gray;\r\n      }\r\n\r\n      :host /deep/ .axisWrapper line {\r\n        stroke: gray;\r\n      }\r\n\r\n      :host /deep/ .axisWrapper text {\r\n        fill: gray;\r\n      }\r\n    `\r\n  ]\r\n})\r\nexport class HBoxPlotComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\r\n\r\n  /**\r\n   * Necessary to control hiding of the element, otherwise the BBoxes are not defined and labels\r\n   * were not rendered in correct places.\r\n   *\r\n   */\r\n  @Input()\r\n  hidden = false;\r\n\r\n\r\n  @Input()\r\n  data: number[][];\r\n\r\n  @Input()\r\n  removed: number[] = [];\r\n\r\n  @Input()\r\n  domain: number[] = [17, 36];\r\n\r\n  @Input()\r\n  palette: string[] = [];\r\n\r\n  @Input()\r\n  labels: string[] = [];\r\n\r\n  @Input()\r\n  labelsOn = 'always'; // trigger //null\r\n\r\n  @Input()\r\n  lookAndFeel = defualtLookAndFeel();\r\n\r\n  @Input() // median, label, null\r\n  set sorted(sorting: string) {\r\n\r\n    if (sorting === 'median') {\r\n      this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) => b1.median - b2.median;\r\n    } else if (sorting === 'label') {\r\n      // console.log(\"N\",navigator.language);\r\n      /*if (navigator.language) {\r\n       this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) =>\r\n       b1.label.localeCompare(b2.label, navigator.language, {sensitivity: 'case'});\r\n       } else {\r\n       this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) => b1.label.localeCompare(b2.label);\r\n       };*/\r\n      this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) => {\r\n        if (b1.label === b2.label) {\r\n          return 0;\r\n        }\r\n        if (b1.label < b2.label) {\r\n          return -1;\r\n        }\r\n        return 1;\r\n      };\r\n    } else {\r\n      this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) => b1.ix - b2.ix;\r\n    }\r\n  }\r\n\r\n\r\n  sortChanged = false;\r\n\r\n  @Output()\r\n  colors = new EventEmitter<string[]>();\r\n\r\n  private d3: D3;\r\n  private parentNativeElement: any;\r\n  private d3Svg: Selection<SVGSVGElement, any, null, undefined>;\r\n  // private removedSVG: Selection<SVGSVGElement, any, null, undefined>;\r\n\r\n  private mainPane: Selection<SVGGElement, any, null, undefined>;\r\n\r\n  private graphicContext = new GraphicContext();\r\n  private boxUtil = new BoxUtil();\r\n\r\n  sortFunction = function(b1: BoxDefinition, b2: BoxDefinition) {\r\n    return b1.ix - b2.ix;\r\n  };\r\n\r\n\r\n  constructor(private ngZone: NgZone, private changeDetectorRef: ChangeDetectorRef, element: ElementRef) {\r\n    this.d3 = d3;\r\n    this.parentNativeElement = element.nativeElement;\r\n\r\n  }\r\n\r\n  /**\r\n   * It is detached from angular to prevent unnecessary change detection\r\n   */\r\n  ngAfterViewInit() {\r\n    this.changeDetectorRef.detach();\r\n    // console.log(\"AFI\");\r\n  }\r\n\r\n  /**\r\n   * Explicit triggers re-drawing as need to have all the parameters set (so will not redrawn if data came frist and domain later)\r\n   * @param changes\r\n   */\r\n  ngOnChanges(changes: SimpleChanges) {\r\n\r\n    // console.log(\"Changes\", changes);\r\n\r\n    // otherwise the hidden on inner div was not updated\r\n    this.changeDetectorRef.detectChanges();\r\n\r\n\r\n    this.initSVG();\r\n\r\n    // this.handleHiding();\r\n\r\n    if (!this.data) {\r\n      return;\r\n    }\r\n\r\n    this.sortChanged = changes.sorted !== undefined;\r\n\r\n    if (!this.hidden) {\r\n      this.updatePlot();\r\n    }\r\n  }\r\n\r\n  isDataUpdate(changes: any): boolean {\r\n\r\n    return (changes.data || changes.removed || changes.domain || changes.palette || changes.labels );\r\n  }\r\n\r\n  initSVG() {\r\n    if (!this.d3Svg) {\r\n      const d3ParentElement = this.d3.select(this.parentNativeElement);\r\n      this.d3Svg = d3ParentElement.select('.hbox-plot').append<SVGSVGElement>('svg');\r\n      this.d3Svg.attr('width', '0');\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    if (this.parentNativeElement !== null) {\r\n\r\n\r\n    } else {\r\n      console.error('Missing parrent element for the component');\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.d3Svg && this.d3Svg.empty && !this.d3Svg.empty()) {\r\n      this.d3Svg.selectAll('*').remove();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Only for testing\r\n   * @param context\r\n   */\r\n  testGraphicContext(context: GraphicContext) {\r\n    this.graphicContext = context;\r\n  }\r\n\r\n  /* Not needed any more, the hidding is achieved by simple div hidden attribute\r\n   // and the problem with labels background rendering is solved using delayed rendering with a timer.\r\n   handleHiding() {\r\n   if (this.hidden) {\r\n   this.removed = this.d3Svg.remove();\r\n   } else {\r\n   if (this.removed) {\r\n   this.d3.select(this.parentNativeElement)\r\n   .select('.hbox-plot')\r\n   .append(() => this.d3Svg.node());\r\n   this.removed = undefined;\r\n   }\r\n   }\r\n\r\n   }*/\r\n\r\n  updatePlot() {\r\n\r\n    // this.graphicContext.transitionTime = this.lookAndFeel.transitionTime;\r\n\r\n    if (this.lookAndFeel.transitionTime > 0) {\r\n      this.graphicContext.transitionOn = true;\r\n      this.ngZone.runOutsideAngular(() => {\r\n        this.graphicContext.transition = (this.d3 as any).transition().duration(this.lookAndFeel.transitionTime);\r\n      });\r\n    } else {\r\n      this.graphicContext.transitionOn = false;\r\n      this.graphicContext.transition = undefined;\r\n    }\r\n\r\n    this.graphicContext = this.updatePalette(this.data, this.palette, this.graphicContext);\r\n\r\n    let boxes = this.prepareDataModel(this.data, this.removed, this.labels, this.graphicContext.palette,\r\n      this.domain, this.sortFunction);\r\n\r\n    boxes = boxes.filter(b => !b.hidden);\r\n\r\n    this.graphicContext = this.preparePane(boxes, this.lookAndFeel, this.graphicContext);\r\n\r\n    this.graphicContext = this.prepareScales(boxes, this.domain, this.lookAndFeel, this.graphicContext);\r\n\r\n    this.graphicContext = this.plotAxisBox(boxes, this.domain, this.lookAndFeel, this.mainPane, this.graphicContext);\r\n\r\n\r\n    this.graphicContext = this.plotDataBoxes(boxes, this.lookAndFeel, this.mainPane, this.graphicContext);\r\n\r\n    this.graphicContext = this.prepareTooltip(this.mainPane, this.graphicContext);\r\n\r\n    this.graphicContext = this.prepareLabels(boxes, this.mainPane, this.lookAndFeel, this.graphicContext, this.labelsOn);\r\n\r\n  }\r\n\r\n  prepareDataModel(data: number[][], removed: number[], labels: string[], palette: string[], domain: number[],\r\n                   sortFunction: (b1: BoxDefinition, b2: BoxDefinition) => number): BoxDefinition[] {\r\n\r\n    let boxes = this.boxUtil.dataToBoxes(data);\r\n\r\n    this.boxUtil.mockEmptyValues(boxes, domain[1]);\r\n    this.labelBoxes(boxes, labels);\r\n\r\n    this.colorBoxes(boxes, palette);\r\n\r\n    removed.forEach(ix => {\r\n      if (boxes[ix]) {\r\n        boxes[ix].hidden = true;\r\n      }\r\n    });\r\n\r\n    boxes = boxes.sort(sortFunction);\r\n    return boxes;\r\n\r\n  }\r\n\r\n\r\n  updatePalette(data: any[], palette: string[], graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (!palette || palette.length === 0) {\r\n      graphicContext.palette = BD2ColorPalette.palette(data.length);\r\n    } else {\r\n      graphicContext.palette = BD2ColorPalette.extendPalette(palette, data.length);\r\n\r\n    }\r\n    this.colors.next(graphicContext.palette.slice());\r\n\r\n    return graphicContext;\r\n  }\r\n\r\n  colorBoxes(boxes: BoxDefinition[], palette: string[]) {\r\n    boxes.forEach(b => b.color = palette[b.ix]);\r\n  }\r\n\r\n\r\n  preparePane(data: any[], lookAndFeel: LookAndFeel, graphicContext: GraphicContext): GraphicContext {\r\n\r\n    // console.log(\"PP\",data);\r\n\r\n    if (!this.mainPane) {\r\n      // let d3ParentElement = this.d3.select(this.parentNativeElement);\r\n      // this.d3Svg = d3ParentElement.select('.hbox-plot').append<SVGSVGElement>('svg');\r\n      this.d3Svg.attr('width', '100%');\r\n\r\n      this.mainPane = this.d3Svg.append<SVGGElement>('g');\r\n      this.mainPane.classed('mainPane', true);\r\n\r\n    }\r\n\r\n    const pWidth = 500;\r\n    const pHeight = this.calculateWorkspaceHeight(data, lookAndFeel) + 2 * lookAndFeel.vMargin;\r\n\r\n    const elm = (graphicContext.transitionOn ? this.d3Svg.transition(graphicContext.transition) : this.d3Svg);\r\n    elm.attr('viewBox', '0 0 ' + pWidth + ' ' + pHeight);\r\n    this.mainPane.attr('transform', 'translate(' + lookAndFeel.hMarginL + ',' + lookAndFeel.vMargin + ')');\r\n    // .attr('transform', 'translate(' + (pWidth / 2) + ',' + (pHeight / 2) + ')'); //moves 0,0 of the pain to the middle of the graphics\r\n\r\n    graphicContext.workspaceWidth = pWidth - lookAndFeel.hMarginL - lookAndFeel.hMarginR;\r\n    graphicContext.workspaceHeight = pHeight - 2 * lookAndFeel.vMargin;\r\n\r\n    return graphicContext;\r\n\r\n  }\r\n\r\n  calculateWorkspaceHeight(data: any[], lookAndFeel: LookAndFeel) {\r\n    return lookAndFeel.rowWidth * data.length;\r\n\r\n  }\r\n\r\n\r\n  labelBoxes(boxes: BoxDefinition[], labels: string[]) {\r\n    if (!labels) {\r\n      labels = [];\r\n    }\r\n\r\n\r\n    boxes.forEach((b, ix) => {\r\n      b.label = labels[ix] ? labels[ix] : '' + (ix + 1);\r\n    });\r\n  }\r\n\r\n  prepareLabels(boxes: BoxDefinition[], mainPane: Selection<SVGGElement, any, null, undefined>, lookAndFeel: LookAndFeel,\r\n                graphicContext: GraphicContext, labelsOn: string): GraphicContext {\r\n\r\n    if (!graphicContext.labelsWrapper) {\r\n      graphicContext.labelsWrapper = mainPane.append<SVGGElement>('g')\r\n        .classed('labelsWrapper', true);\r\n    }\r\n\r\n    if (!graphicContext.backLabelsWrapper) {\r\n      graphicContext.backLabelsWrapper = mainPane.insert<SVGGElement>('g', 'g.dataWrapper')\r\n        .classed('backLabelsWrapper', true);\r\n    }\r\n\r\n    const backLabelsOn = labelsOn === 'always';\r\n    const mainLabelsOn = labelsOn === 'always' || labelsOn === 'trigger';\r\n\r\n\r\n    const labels = graphicContext.labelsWrapper.selectAll('g.yLabel')\r\n      .data(mainLabelsOn ? boxes : [], (d: BoxDefinition) => d.key);\r\n\r\n    labels.exit().remove();\r\n\r\n    const newLabels = labels.enter()\r\n      .append<SVGGElement>('g')\r\n      .classed('yLabel', true);\r\n\r\n    this.ngZone.runOutsideAngular(() => {\r\n      newLabels.on('mouseover', function(evnt: MouseEvent, d: BoxDefinition) {\r\n        d3.select(this)\r\n          .selectAll('.yLabel')\r\n          // .style(\"visibility\", \"visible\");\r\n          .style('display', null);\r\n      }).on('mouseout', function() {\r\n        d3.select(this)\r\n          .selectAll('.yLabel')\r\n          // .style(\"visibility\", \"hidden\");\r\n          .style('display', 'none');\r\n      });\r\n    });\r\n\r\n    newLabels.append<SVGGElement>('rect')\r\n      .attr('class', 'yTrigger')\r\n      .style('fill-opacity', 1)\r\n    ;\r\n\r\n    newLabels.append<SVGGElement>('rect')\r\n      .attr('class', 'yLabel')\r\n      .style('fill-opacity', 0.35)\r\n      // .style(\"visibility\", \"hidden\");\r\n      .style('display', 'none');\r\n\r\n\r\n    newLabels.append<SVGGElement>('text')\r\n      .attr('class', 'yLabel')\r\n      .attr('text-anchor', 'left')\r\n      .attr('dominant-baseline', 'central')\r\n      .style('font-size', lookAndFeel.labelFont)\r\n      .style('opacity', 1)\r\n      .attr('x', 5)\r\n    // .style(\"visibility\", \"hidden\");\r\n    // .style(\"display\", \"none\");\r\n    ;\r\n\r\n    const backLabels = graphicContext.backLabelsWrapper.selectAll('g.yLabel')\r\n      .data(backLabelsOn ? boxes : [], (d: BoxDefinition) => d.key);\r\n\r\n    backLabels.exit().remove();\r\n\r\n    const newBackLabels = backLabels.enter()\r\n      .append<SVGGElement>('g')\r\n      .classed('yLabel', true);\r\n\r\n    /*\r\n     newBackLabels.append<SVGGElement>(\"rect\")\r\n     .attr(\"class\", \"yLabel\")\r\n     .style(\"fill-opacity\", 0.05);\r\n     */\r\n\r\n    newBackLabels.append<SVGGElement>('text')\r\n      .attr('class', 'yLabel')\r\n      .attr('text-anchor', 'left')\r\n      .attr('dominant-baseline', 'central')\r\n      .style('font-size', lookAndFeel.labelFont)\r\n      .style('opacity', lookAndFeel.backLabelOpacity)\r\n      .attr('x', 5);\r\n    // .style(\"visibility\", \"hidden\");\r\n\r\n\r\n    const enterUpdate: Selection<SVGSVGElement, BoxDefinition, null, undefined> =\r\n      newLabels.merge(labels as any) as Selection<SVGSVGElement, BoxDefinition, null, undefined>;\r\n\r\n    const backEnterUpdate: Selection<SVGSVGElement, BoxDefinition, null, undefined> =\r\n      newBackLabels.merge(backLabels as any) as Selection<SVGSVGElement, BoxDefinition, null, undefined>;\r\n\r\n    // called with delay to allow, parent divs to component sets their visibility, otherwise the bboxes cannot be calculated\r\n    // and the labels backgrounds and trigers are not rendered correctly\r\n    // it is a hack, but don't know how to do it correctly\r\n    // timers have to be cleared as otherwise saw errors in logs for fast changing input data (like cause by sorting and pagination)\r\n    graphicContext.labelsTimers.forEach( timer => clearTimeout(timer));\r\n    graphicContext.labelsTimers = [];\r\n    const timer = setTimeout(() => {\r\n\r\n\r\n      const bboxes: SVGRect[] = [];\r\n\r\n      enterUpdate.select<SVGSVGElement>('text')\r\n        .style('display', null)\r\n        .attr('y', d => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth() / 2)\r\n        .text(d => d.label)\r\n        .each(function(d) {\r\n          bboxes.push(this.getBBox());\r\n          // console.log(\"D: \" + d.label, this.getBBox());\r\n        })\r\n        .style('display', 'none');\r\n\r\n\r\n      let elm = backEnterUpdate.select<SVGSVGElement>('text');\r\n      elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n      elm\r\n        .attr('y', d => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth() / 2)\r\n        .text(d => d.label)\r\n      // .style(\"fill\", d => d.color)\r\n      /*.each(function (d) {\r\n       bboxes.push(this.getBBox());\r\n       //console.log(\"D: \" + d.label, this.getBBox());\r\n       });*/\r\n      ;\r\n\r\n      const trigers = enterUpdate.select<SVGSVGElement>('.yTrigger')\r\n        .style('fill', d => d.color)\r\n        .style('stroke', d => d.color);\r\n\r\n\r\n      let telm = trigers.data(bboxes);\r\n      telm = (graphicContext.transitionOn ? telm.transition(graphicContext.transition) : telm) as any;\r\n      telm\r\n        .attr('x', -7)\r\n        .attr('y', b => b.y - 3)\r\n        .attr('width', b => 7)\r\n        .attr('height', b => b.height + 6);\r\n\r\n      const frames = enterUpdate.select<SVGSVGElement>('rect.yLabel')\r\n        .style('fill', d => d.color)\r\n        .style('fill-opacity', lookAndFeel.labelFillOpacity);\r\n\r\n      frames.data(bboxes)\r\n        .attr('x', 0)\r\n        .attr('y', b => b.y - 3)\r\n        .attr('width', b => b.width + 10)\r\n        .attr('height', b => b.height + 7);\r\n\r\n\r\n      /*\r\n       let backFrames = backEnterUpdate.select<SVGSVGElement>(\"rect.yLabel\")\r\n       .style(\"fill\", d => d.color);\r\n\r\n       backFrames.data(bboxes)\r\n       .attr(\"x\", 0)\r\n       .attr(\"y\", b => b.y - 3)\r\n       .attr(\"width\", b => b.width + 10)\r\n       .attr(\"height\", b => b.height + 7);\r\n       */\r\n\r\n    }, 10);\r\n\r\n    graphicContext.labelsTimers.push(timer);\r\n    return graphicContext;\r\n  }\r\n\r\n\r\n  prepareTooltip(mainPane: Selection<SVGGElement, any, null, undefined>, graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (graphicContext.tooltipWrapper) {\r\n      return graphicContext;\r\n    }\r\n\r\n    graphicContext.tooltipWrapper = mainPane.append<SVGGElement>('g')\r\n      .classed('tooltipWrapper', true);\r\n\r\n    graphicContext.tooltipBox = graphicContext.tooltipWrapper.append<SVGGElement>('rect')\r\n      .style('fill', 'white')\r\n      .style('fill-opacity', 0.8)\r\n      .style('stroke', 'grey')\r\n    // .style(\"visibility\", \"hidden\");\r\n    ;\r\n\r\n    graphicContext.tooltipText = graphicContext.tooltipWrapper.append<SVGGElement>('text')\r\n      .attr('class', 'tooltip')\r\n      // .attr(\"text-anchor\", \"left\")\r\n      .attr('text-anchor', 'middle')\r\n      // .attr(\"alignment-baseline\", \"middle\")\r\n      // .attr(\"alignment-baseline\", \"baseline\")\r\n      // .attr(\"dy\", \"-10px\")\r\n      .style('opacity', 1)\r\n    // .attr(\"dx\", \"0.35em\")\r\n    // .style(\"font-size\", this.lookAndFeel.tooltipFontSize) //\"11px\")\r\n    // .style(\"opacity\", 0)\r\n    ;\r\n\r\n    graphicContext.tooltipWrapper\r\n    // .style(\"visibility\", \"hidden\");\r\n      .style('display', 'none');\r\n\r\n    return graphicContext;\r\n  }\r\n\r\n  showTooltip(v: number, x: any, y: any) {\r\n    // console.log(\"Show: \" + v + \";\" + this.constructor.name);\r\n    // console.log('Show: ' + v + '; ' + x + ': ' + y);\r\n    // console.log('v', SmartRounder.round(v));\r\n    // console.log('x', this.graphicContext.xScale(x));\r\n    // console.log('y', this.graphicContext.yScale(y));\r\n\r\n    if (!this.graphicContext.tooltipText) {\r\n      return;\r\n    }\r\n\r\n    this.graphicContext.tooltipText\r\n      .attr('x', this.graphicContext.xScale(x))\r\n      .attr('y', this.graphicContext.yScale(y))\r\n      .text(SmartRounder.round(v))\r\n    // .transition().duration(this.lookAndFeel.baseTransitionsTime / 2)\r\n    // .style('opacity', 1);\r\n    ;\r\n\r\n    // I have to change the display here even before the box is ready as\r\n    // in firefox the getBBox was not working if called with display none\r\n    // giving NS_ERROR_FAILURE 2147500037\r\n    this.graphicContext.tooltipWrapper\r\n      // .style(\"visibility\", \"visible\");\r\n      .style('display', null);\r\n\r\n    const bbox = this.graphicContext.tooltipText.node().getBBox();\r\n\r\n    this.graphicContext.tooltipBox\r\n      .attr('x', bbox.x - 3)\r\n      .attr('y', bbox.y - 2)\r\n      .attr('width', bbox.width + 6)\r\n      .attr('height', bbox.height + 4);\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  hideTooltip() {\r\n    // console.log(\"Hide: \");\r\n    if (!this.graphicContext.tooltipText) {\r\n      return;\r\n    }\r\n\r\n\r\n    this.graphicContext.tooltipWrapper\r\n    // .style(\"visibility\", \"hidden\");\r\n      .style('display', 'none');\r\n\r\n\r\n    // this.graphicContext.tooltipText\r\n    // .transition().duration(this.lookAndFeel.baseTransitionsTime / 2)\r\n    // .style(\"opacity\", 0);\r\n  }\r\n\r\n  prepareScales(data: BoxDefinition[], domain: number[], lookAndFeel: LookAndFeel,\r\n                graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (!graphicContext.xScale) {\r\n      graphicContext.xScale = d3.scaleLinear()\r\n        .clamp(true);\r\n    }\r\n\r\n    graphicContext.xScale\r\n      .domain(domain)\r\n      .range([0, graphicContext.workspaceWidth]);\r\n\r\n    if (!graphicContext.yScale) {\r\n      graphicContext.yScale = d3.scaleBand()\r\n        .padding(lookAndFeel.rowGap)\r\n      ;\r\n    }\r\n\r\n    const domainY = data.map((d) => d.key);\r\n\r\n    graphicContext.yScale\r\n      .domain(domainY)\r\n      .range([0, graphicContext.workspaceHeight]);\r\n\r\n\r\n    return graphicContext;\r\n  }\r\n\r\n  plotAxisBox(data: BoxDefinition[], domain: number[], lookAndFeel: LookAndFeel, mainPane: Selection<SVGGElement, any, null, undefined>,\r\n              graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (!graphicContext.axisWrapper) {\r\n      graphicContext.axisWrapper = this.initAxisWrapper(mainPane);\r\n    }\r\n\r\n    graphicContext = this.plotHorizontalScales(domain, lookAndFeel, graphicContext);\r\n    graphicContext = this.plotVerticalScales(data, lookAndFeel, graphicContext);\r\n\r\n    return graphicContext;\r\n\r\n  }\r\n\r\n  initAxisWrapper(mainPane: Selection<SVGGElement, any, null, undefined>): Selection<SVGGElement, any, null, undefined> {\r\n\r\n    let wrapper = mainPane.select<SVGGElement>('.axisWrapper');\r\n    if (wrapper.size() === 0) {\r\n      wrapper = mainPane.append<SVGGElement>('g').attr('class', 'axisWrapper');\r\n\r\n      wrapper.append('g').attr('class', 'xTopAxis');\r\n      wrapper.append('g').attr('class', 'xBottomAxis');\r\n      wrapper.append('g').attr('class', 'yLeftAxis');\r\n      wrapper.append('g').attr('class', 'yRightAxis');\r\n\r\n    }\r\n    return wrapper;\r\n  }\r\n\r\n  plotHorizontalScales(domain: number[], lookAndFeel: LookAndFeel, graphicContext: GraphicContext): GraphicContext {\r\n\r\n\r\n    if (!graphicContext.xTopAxis) {\r\n      graphicContext.xTopAxis = d3.axisTop(graphicContext.xScale);\r\n    }\r\n\r\n    if (!graphicContext.xBottomAxis) {\r\n      graphicContext.xBottomAxis = d3.axisBottom(graphicContext.xScale);\r\n    }\r\n\r\n\r\n    graphicContext.axisWrapper\r\n      .select('g.xTopAxis')\r\n      .call(graphicContext.xTopAxis);\r\n\r\n    let elm = graphicContext.axisWrapper.select('g.xBottomAxis') as any;\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm);\r\n    elm\r\n      .attr('transform', 'translate(0,' + graphicContext.workspaceHeight + ')')\r\n      .call(graphicContext.xBottomAxis);\r\n\r\n    return graphicContext;\r\n\r\n  }\r\n\r\n  plotVerticalScales(data: BoxDefinition[], lookAndFeel: LookAndFeel, graphicContext: GraphicContext): GraphicContext {\r\n\r\n\r\n    if (!graphicContext.yLeftAxis) {\r\n      graphicContext.yLeftAxis = d3.axisLeft(graphicContext.yScale)\r\n        .tickFormat(() => '')\r\n      ;\r\n    }\r\n\r\n    if (!graphicContext.yRightAxis) {\r\n      graphicContext.yRightAxis = d3.axisRight(graphicContext.yScale)\r\n        .tickValues([])\r\n      ;\r\n    }\r\n\r\n    let elm = graphicContext.axisWrapper.select('g.yLeftAxis') as any;\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm);\r\n    elm\r\n      .call(graphicContext.yLeftAxis);\r\n\r\n\r\n    elm = graphicContext.axisWrapper.select('g.yRightAxis')\r\n      .attr('transform', 'translate(' + graphicContext.workspaceWidth + ',0)') as any;\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm);\r\n    elm\r\n      .call(graphicContext.yRightAxis);\r\n\r\n    return graphicContext;\r\n\r\n  }\r\n\r\n\r\n  plotDataBoxes(boxes: BoxDefinition[], lookAndFeel: LookAndFeel, mainPane: Selection<SVGGElement, any, null, undefined>,\r\n                graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (!graphicContext.dataWrapper) {\r\n      graphicContext.dataWrapper = mainPane.append<SVGGElement>('g').attr('class', 'dataWrapper');\r\n    }\r\n\r\n\r\n\r\n    let boxWidgets = graphicContext.dataWrapper.selectAll('.boxWidget') as Selection<SVGGElement, BoxDefinition, null, undefined>;\r\n\r\n    boxWidgets = boxWidgets.data(boxes, d => d.key);\r\n\r\n\r\n    this.updateBoxWidgets(boxWidgets, lookAndFeel, graphicContext);\r\n\r\n    const newBoxWidgets = boxWidgets.enter()\r\n      .append<SVGGElement>('g').attr('class', 'boxWidget');\r\n\r\n\r\n    this.createBoxWidgets(newBoxWidgets, lookAndFeel, graphicContext);\r\n\r\n    boxWidgets.exit().remove();\r\n\r\n\r\n    return graphicContext;\r\n  }\r\n\r\n  updateBoxWidgets(boxWidgets: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n                   lookAndFeel: LookAndFeel, graphicContext: GraphicContext) {\r\n\r\n    // this.ngZone.runOutsideAngular(() => {\r\n\r\n    boxWidgets.select('rect.backdrop')\r\n      .call(this.positionBackdrop, graphicContext);\r\n\r\n    this.updateWhiskers(boxWidgets.select('g.whiskers') as any, graphicContext);\r\n\r\n    boxWidgets.select('g.box rect')\r\n      .call(this.positionBoxRectangle, graphicContext);\r\n\r\n    boxWidgets.select('g.box line.medianline')\r\n      .call(this.positionMedianLine, graphicContext);\r\n\r\n    boxWidgets.select('g.box line.meanline')\r\n      .call(this.positionMeanLine, graphicContext);\r\n\r\n    const out = boxWidgets.select('g.outliers').selectAll('.outlier')\r\n      .data(d => d.outliers.map(x => [x, d.key, d.color]));\r\n\r\n    out.enter()\r\n      .call(this.createOutlier, lookAndFeel, graphicContext, this.positionOutlier);\r\n\r\n    out.call(this.positionOutlier, graphicContext);\r\n\r\n    out.exit().remove();\r\n\r\n    // });\r\n\r\n  }\r\n\r\n\r\n  positionBackdrop(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x', (d) => offsetScaleValue(d.lowWskr, -5, graphicContext.xScale))\r\n      .attr('y', (d) => {\r\n        return graphicContext.yScale(d.key);\r\n      })\r\n      .attr('width', (d) => {\r\n        const x1 = offsetScaleValue(d.lowWskr, -5, graphicContext.xScale);\r\n        const x2 = offsetScaleValue(d.highWskr, +5, graphicContext.xScale);\r\n        return x2 - x1;\r\n      })\r\n      .attr('height', (d) => {\r\n        return graphicContext.yScale.bandwidth();\r\n      })\r\n    // .style(\"stroke\", d => d.color)\r\n    // .style(\"fill\", d => d.color)\r\n    ;\r\n\r\n  }\r\n\r\n  positionBoxRectangle(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x', (d) => graphicContext.xScale(d.fstQnt))\r\n      .attr('y', (d) => {\r\n        return graphicContext.yScale(d.key);\r\n      })\r\n      .attr('width', (d) => (graphicContext.xScale(d.thrdQnt) - graphicContext.xScale(d.fstQnt)))\r\n      .attr('height', (d) => {\r\n        return graphicContext.yScale.bandwidth();\r\n      })\r\n      .style('stroke', d => d.color)\r\n      .style('fill', d => d.color);\r\n\r\n  }\r\n\r\n  positionMedianLine(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x1', (d, i) => graphicContext.xScale(d.median))\r\n      .attr('y1', (d, i) => graphicContext.yScale(d.key))\r\n      .attr('x2', (d, i) => graphicContext.xScale(d.median))\r\n      .attr('y2', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth())\r\n      .style('stroke', d => d.color)\r\n      // .style(\"visibility\", d => d.mean === d.median ? \"hidden\" : \"visible\");\r\n      .style('display', d => d.mean === d.median ? 'none' : null);\r\n\r\n\r\n\r\n  }\r\n\r\n  positionMeanLine(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x1', (d, i) => graphicContext.xScale(d.mean))\r\n      .attr('y1', (d, i) => graphicContext.yScale(d.key))\r\n      .attr('x2', (d, i) => graphicContext.xScale(d.mean))\r\n      .attr('y2', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth())\r\n      .style('stroke', d => d.color);\r\n  }\r\n\r\n  positionOutlier(elm: Selection<SVGGElement, any, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm.attr('cx', d => graphicContext.xScale(d[0]))\r\n      .attr('cy', d => graphicContext.yScale(d[1]) + graphicContext.yScale.bandwidth() / 2)\r\n      .style('stroke', d => d[2])\r\n      .style('fill', d => d[2]);\r\n\r\n  }\r\n\r\n\r\n  createOutlier(elm: Selection<SVGGElement, any, null, undefined>, lookAndFeel: LookAndFeel, graphicContext: GraphicContext,\r\n                positionOutlierFunction: (elm: Selection<SVGGElement, any, null, undefined>, graphicContext: GraphicContext) => {}) {\r\n\r\n\r\n    elm\r\n      .append<SVGGElement>('circle')\r\n      .attr('class', 'outlier')\r\n      .attr('r', lookAndFeel.outliersCircleRadius)\r\n      .style('stroke-width', lookAndFeel.outliersStrokeWidth)\r\n      .style('fill-opacity', lookAndFeel.outliersFillOpacity)\r\n      .call(positionOutlierFunction, graphicContext)\r\n    ;\r\n\r\n  }\r\n\r\n  positionWhiskerLine(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, left: boolean, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x1', (d, i) => left ? graphicContext.xScale(d.lowWskr) : graphicContext.xScale(d.thrdQnt))\r\n      .attr('y1', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth() / 2)\r\n      .attr('x2', (d, i) => left ? graphicContext.xScale(d.fstQnt) : graphicContext.xScale(d.highWskr))\r\n      .attr('y2', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth() / 2)\r\n      .style('stroke', d => d.color)\r\n      // .style(\"visibility\", d => (left && (d.lowWskr === d.fstQnt)) || (!left && (d.highWskr === d.thrdQnt)) ? \"hidden\" : \"visible\");\r\n      .style('display', d => (left && (d.lowWskr === d.fstQnt)) || (!left && (d.highWskr === d.thrdQnt)) ? 'none' : null);\r\n\r\n\r\n  }\r\n\r\n  positionWhiskerTip(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, left: boolean, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x1', (d, i) => left ? graphicContext.xScale(d.lowWskr) : graphicContext.xScale(d.highWskr))\r\n      .attr('y1', (d, i) => graphicContext.yScale(d.key))\r\n      .attr('x2', (d, i) => left ? graphicContext.xScale(d.lowWskr) : graphicContext.xScale(d.highWskr))\r\n      .attr('y2', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth())\r\n      .style('stroke', d => d.color)\r\n      // .style(\"visibility\", d => (left && (d.lowWskr === d.fstQnt)) || (!left && (d.highWskr === d.thrdQnt)) ? \"hidden\" : \"visible\");\r\n      .style('display', d => (left && (d.lowWskr === d.fstQnt)) || (!left && (d.highWskr === d.thrdQnt)) ? 'none' : null);\r\n\r\n\r\n\r\n  }\r\n\r\n  updateWhiskers(whiskers: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n                 graphicContext: GraphicContext) {\r\n\r\n    whiskers.select('line.whiskerlineL')\r\n      .call(this.positionWhiskerLine, true, graphicContext);\r\n\r\n    whiskers.select('line.whiskerlineR')\r\n      .call(this.positionWhiskerLine, false, graphicContext);\r\n\r\n    whiskers.select('line.whiskertipL')\r\n      .call(this.positionWhiskerTip, true, graphicContext);\r\n\r\n    whiskers.select('line.whiskertipR')\r\n      .call(this.positionWhiskerTip, false, graphicContext);\r\n\r\n  }\r\n\r\n  createWhiskers(whiskers: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n                 lookAndFeel: LookAndFeel, graphicContext: GraphicContext) {\r\n\r\n\r\n    const lwhiskr = whiskers.append('line')\r\n      .attr('class', 'whiskerlineL')\r\n      .style('stroke-width', lookAndFeel.whiskerStrokeWidth)\r\n      .style('stroke-dasharray', '4 3')\r\n      .call(this.positionWhiskerLine, true, graphicContext)\r\n    ;\r\n    const rwhiskr = whiskers.append('line')\r\n      .attr('class', 'whiskerlineR')\r\n      .style('stroke-width', lookAndFeel.whiskerStrokeWidth)\r\n      .style('stroke-dasharray', '4 3')\r\n      .call(this.positionWhiskerLine, false, graphicContext)\r\n    ;\r\n\r\n    const lTip = whiskers.append('line')\r\n      .attr('class', 'whiskertipL')\r\n      .style('stroke-width', lookAndFeel.whiskerStrokeWidth)\r\n      .call(this.positionWhiskerTip, true, graphicContext)\r\n    ;\r\n\r\n    const rTip = whiskers.append('line')\r\n      .attr('class', 'whiskertipR')\r\n      .style('stroke-width', lookAndFeel.whiskerStrokeWidth)\r\n      .call(this.positionWhiskerTip, false, graphicContext)\r\n    ;\r\n\r\n\r\n  }\r\n\r\n  createBoxes(widgets: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n              lookAndFeel: LookAndFeel, graphicContext: GraphicContext) {\r\n\r\n\r\n    const rect = widgets.append('rect')\r\n      .attr('class', 'box')\r\n      .style('stroke-width', lookAndFeel.boxStrokeWidth)\r\n      .style('fill-opacity', lookAndFeel.boxFillOpacity)\r\n      .call(this.positionBoxRectangle, graphicContext);\r\n\r\n\r\n    const median = widgets.append('line')\r\n      .attr('class', 'medianline')\r\n      .style('stroke-width', lookAndFeel.boxStrokeWidth)\r\n      .call(this.positionMedianLine, graphicContext);\r\n\r\n    const instance = this;\r\n\r\n    this.ngZone.runOutsideAngular(() => {\r\n      rect.on('mouseover', function(evnt: MouseEvent, d: BoxDefinition) {\r\n        instance.showTooltip(d.median, d.median, d.key);\r\n      })\r\n        .on('mouseout', function() {\r\n          instance.hideTooltip();\r\n        });\r\n\r\n      median.on('mouseover', function(evnt: MouseEvent, d: BoxDefinition) {\r\n        instance.showTooltip(d.median, d.median, d.key);\r\n      })\r\n        .on('mouseout', function() {\r\n          instance.hideTooltip();\r\n        });\r\n\r\n    });\r\n\r\n    const mean = widgets\r\n      .append('line')\r\n      .attr('class', 'meanline')\r\n      .style('stroke-width', lookAndFeel.meanStrokeWidth)\r\n      .style('stroke-dasharray', '4 2')\r\n      .call(this.positionMeanLine, graphicContext)\r\n    ;\r\n\r\n    // has to be outside angular, to prevent detection\r\n    this.ngZone.runOutsideAngular(() => {\r\n      mean\r\n        .on('mouseover', function(evnt: MouseEvent, d: BoxDefinition) {\r\n          instance.showTooltip(d.mean, d.mean, d.key);\r\n        })\r\n        .on('mouseout', function() {\r\n          instance.hideTooltip();\r\n        });\r\n\r\n    });\r\n\r\n  }\r\n\r\n  createBoxWidgets(newBoxWidgets: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n                   lookAndFeel: LookAndFeel, graphicContext: GraphicContext) {\r\n\r\n    // this.ngZone.runOutsideAngular(() => {\r\n\r\n    const instance = this;\r\n\r\n    const backdrops = newBoxWidgets.append<SVGGElement>('rect').attr('class', 'backdrop')\r\n    // .style(\"stroke-width\", lookAndFeel.boxStrokeWidth)\r\n      .style('fill-opacity', lookAndFeel.backdropOpacity)\r\n      .style('fill', lookAndFeel.backdropColor)\r\n      .call(this.positionBackdrop, graphicContext);\r\n\r\n\r\n    const whiskers = newBoxWidgets.append<SVGGElement>('g').attr('class', 'whiskers');\r\n\r\n    this.createWhiskers(whiskers, lookAndFeel, graphicContext);\r\n\r\n    const boxes = newBoxWidgets.append<SVGGElement>('g').attr('class', 'box');\r\n    this.createBoxes(boxes, lookAndFeel, graphicContext);\r\n\r\n\r\n    const outliers = newBoxWidgets.append<SVGGElement>('g').attr('class', 'outliers');\r\n\r\n\r\n    outliers.selectAll('.outlier')\r\n      .data(d => d.outliers.map(x => [x, d.key, d.color]))\r\n      .enter()\r\n      .call(this.createOutlier, lookAndFeel, graphicContext, this.positionOutlier)\r\n    ;\r\n\r\n    // });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport {HBoxPlotComponent} from './hbox-plot/hbox-plot.component';\n\n\n\n@NgModule({\n  declarations: [HBoxPlotComponent],\n  imports: [\n  ],\n  exports: [HBoxPlotComponent]\n})\nexport class BD2NgxHBoxplotModule { }\n","/*\n * Public API Surface of bd2-ngx-hboxplot\n */\n\nexport * from './lib/hbox-plot/hbox-plot.component';\nexport * from './lib/bd2-ngx-hboxplot.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}