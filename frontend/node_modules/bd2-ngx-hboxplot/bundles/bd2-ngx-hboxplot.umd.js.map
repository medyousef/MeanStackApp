{"version":3,"file":"bd2-ngx-hboxplot.umd.js","sources":["../../../projects/bd2-ngx-hboxplot/src/lib/d3service/d3.service.ts","../../../projects/bd2-ngx-hboxplot/src/lib/d3service/index.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-plot/hbox-plot.dom.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-utils/box-dom.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-utils/box-util.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-utils/color-palette.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-utils/smart-rounding.ts","../../../projects/bd2-ngx-hboxplot/src/lib/hbox-plot/hbox-plot.component.ts","../../../projects/bd2-ngx-hboxplot/src/lib/bd2-ngx-hboxplot.module.ts","../../../projects/bd2-ngx-hboxplot/src/public-api.ts","../../../projects/bd2-ngx-hboxplot/src/bd2-ngx-hboxplot.ts"],"sourcesContent":["import * as d3lib from 'd3';\r\n\r\nexport type D3 = typeof d3lib;\r\nexport const d3 = d3lib;\r\n\r\n/**\r\n D3 integration was originally based on the code for npm library: d3-ng2-service\r\n by Tom Wanzek, https://github.com/tomwanzek/d3-ng2-service.\r\n\r\n That package was used during developement and then converted into inline service\r\n to reduce the dependencies and boundle size.\r\n\r\n At some point, I moved to to simpler dependency on d3:\r\n npm install --save d3\r\n npm install --save-dev @types/d3\r\n\r\n and removed the parts from d3-modules.ts as they were causing errors\r\n (not sure how to fix them and also one dependency is easier to maintain).\r\n */\r\n","export * from './d3.service';\r\n\r\n/*\r\n// that has been removed after importing a single d3 dependency\r\n\r\nexport {\r\n  // d3-array\r\n  Bin,\r\n  Bisector,\r\n  HistogramGenerator,\r\n  Numeric,\r\n  ThresholdArrayGenerator,\r\n  ThresholdCountGenerator,\r\n  // d3-axis\r\n  Axis,\r\n  AxisContainerElement,\r\n  AxisScale,\r\n  AxisTimeInterval,\r\n  // d3-scale\r\n  InterpolatorFactory,\r\n  ScaleBand,\r\n  ScaleIdentity,\r\n  ScaleLinear,\r\n  ScaleLogarithmic,\r\n  ScaleOrdinal,\r\n  ScalePoint,\r\n  ScalePower,\r\n  ScaleQuantile,\r\n  ScaleQuantize,\r\n  ScaleSequential,\r\n  ScaleThreshold,\r\n  ScaleTime,\r\n\r\n  // d3-selection\r\n  ArrayLike,\r\n  BaseEvent,\r\n  BaseType,\r\n  ContainerElement,\r\n  EnterElement,\r\n  Local,\r\n  NamespaceLocalObject,\r\n  NamespaceMap,\r\n  Selection,\r\n  SelectionFn,\r\n  TransitionLike,\r\n  ValueFn,\r\n  // d3-selection-multi\r\n  ValueMap,\r\n  // d3-shape\r\n  Arc,\r\n  Area,\r\n  DefaultArcObject,\r\n  Line,\r\n  Pie,\r\n  PieArcDatum,\r\n  RadialArea,\r\n  RadialLine,\r\n  Series,\r\n  SeriesPoint,\r\n  Stack,\r\n  Symbol,\r\n  SymbolType,\r\n  // d3-transition\r\n  Transition\r\n} from './d3-modules';\r\n\r\n\r\n */\r\n","// import {Transition} from 'd3-transition';\nimport {Axis} from 'd3-axis';\nimport {ScaleBand, ScaleLinear} from 'd3-scale';\nimport {Selection, Transition} from 'd3';\n\n\nexport class LookAndFeel {\n\n  vMargin = 25;\n  hMarginL = 20;\n  hMarginR = 15;\n  rowWidth = 30;\n  rowGap = 0.2;\n\n  transitionTime = 600;\n\n  boxStrokeWidth = '2px';\n  boxFillOpacity = 0.35;\n  meanStrokeWidth = '4px';\n\n  labelFont = '12px';\n  labelFillOpacity = 0.35;\n  backLabelOpacity = 0.30;\n\n  backdropColor = 'white';\n  backdropOpacity = 1;\n\n  whiskerStrokeWidth = '1px';\n\n  outliersStrokeWidth = '1px';\n  outliersCircleRadius = 3;\n  outliersFillOpacity = 0.4;\n}\n\n\nexport let defualtLookAndFeel: () => LookAndFeel = function() {\n  return new LookAndFeel();\n};\n\nexport class GraphicContext {\n\n  /*transitionTime: number;\n\n   get transitionOn(): boolean {\n   return (this.transitionTime && this.transitionTime > 0);\n   };*/\n\n  transitionOn: boolean;\n  transition: Transition<any, any, any, any>;\n\n  workspaceWidth: number;\n  workspaceHeight: number;\n\n  axisWrapper: Selection<SVGGElement, any, null, undefined>;\n  xScale: ScaleLinear<number, number>;\n  xTopAxis: Axis<number | { valueOf(): number }>;\n  xBottomAxis: Axis<number | { valueOf(): number }>;\n\n  yScale: ScaleBand<string>;\n  yLeftAxis: Axis<string>;\n  yRightAxis: Axis<string>;\n\n  palette: string[];\n\n  dataWrapper: Selection<SVGGElement, any, null, undefined>;\n\n  tooltipWrapper: Selection<SVGGElement, any, null, undefined>;\n  tooltipText: Selection<SVGGElement, any, null, undefined>;\n  tooltipBox: Selection<SVGGElement, any, null, undefined>;\n\n  labelsWrapper: Selection<SVGGElement, any, null, undefined>;\n  backLabelsWrapper: Selection<SVGGElement, any, null, undefined>;\n  labelsTimers = [];\n}\n\nexport function offsetScaleValue(x: number, pixOffset: number, scale: ScaleLinear<number, number>) {\n  const r = scale.range();\n  const pos = scale(x) + pixOffset;\n  if (pos < r[0]) {\n    return r[0];\n  } else if (pos > r[1]) {\n    return r[1];\n  }\n  return pos;\n}\n\n\n\n","\nexport class BoxDefinition {\n  median: number;\n  mean: number;\n  fstQnt: number;\n  thrdQnt: number;\n  lowWskr: number;\n  highWskr: number;\n  outliers: number[] = [];\n  ix: number;\n  key: string;\n  label: string;\n  color: string;\n  hidden: boolean;\n}\n","import {BoxDefinition} from './box-dom';\nimport {d3} from '../d3service';\n\nexport class BoxUtil {\n\n  dataToBoxes(data: number[][]): BoxDefinition[] {\n    if (!data) {\n      return [];\n    }\n\n\n    return data.map((v, ix) => {\n      const b = this.datumToBox(v);\n      b.ix = ix;\n      b.key = (ix + 1) + '.';\n      return b;\n    });\n  }\n\n  datumToBox(data: number[]): BoxDefinition {\n\n    const box = new BoxDefinition();\n    if (!data || data.length === 0) {\n      return box;\n    }\n\n    data = data.sort(d3.ascending);\n    box.mean = d3.mean(data);\n    box.median = d3.median(data);\n    box.fstQnt = d3.quantile(data, 0.25);\n    box.thrdQnt = d3.quantile(data, 0.75);\n\n    const iqr = 1.5 * (box.thrdQnt - box.fstQnt);\n    box.lowWskr = box.fstQnt - iqr;\n    box.highWskr = box.thrdQnt + iqr;\n\n    for (let i = 0; i < data.length; i++) {\n      if (data[i] >= box.lowWskr) {\n        box.lowWskr = data[i];\n        break;\n      }\n    }\n\n    for (let i = data.length - 1; i >= 0; i--) {\n      if (data[i] <= box.highWskr) {\n        box.highWskr = data[i];\n        break;\n      }\n    }\n\n\n    box.outliers = data.filter(v => (v < box.lowWskr || v > box.highWskr));\n    return box;\n  }\n\n  mockEmptyValues(boxes: BoxDefinition[], missingVal: number) {\n    boxes.forEach(box => {\n      if (box.mean === undefined || box.mean === null) {\n        box.mean = missingVal;\n        box.median = missingVal;\n        box.fstQnt = missingVal;\n        box.thrdQnt = missingVal;\n        box.lowWskr = missingVal;\n        box.highWskr = missingVal;\n      }\n    });\n  }\n}\n","\r\nexport class BD2ColorPalette {\r\n\r\n  static schemeCategory10 = [\r\n    '#1f77b4',\r\n    '#ff7f0e',\r\n    '#2ca02c',\r\n    '#d62728',\r\n    '#9467bd',\r\n    '#8c564b',\r\n    '#e377c2',\r\n    '#7f7f7f',\r\n    '#bcbd22',\r\n    '#17becf'\r\n  ];\r\n\r\n  static schemeCategory20 = [\r\n'#1f77b4'\r\n, '#aec7e8'\r\n, '#ff7f0e'\r\n, '#ffbb78'\r\n, '#2ca02c'\r\n, '#98df8a'\r\n, '#d62728'\r\n, '#ff9896'\r\n, '#9467bd'\r\n, '#c5b0d5'\r\n, '#8c564b'\r\n, '#c49c94'\r\n, '#e377c2'\r\n, '#f7b6d2'\r\n, '#7f7f7f'\r\n, '#c7c7c7'\r\n, '#bcbd22'\r\n, '#dbdb8d'\r\n, '#17becf'\r\n, '#9edae5'];\r\n\r\n  static extendPalette(palette: string[] | ReadonlyArray<string>, size: number): string[] {\r\n\r\n    if (!palette || palette.length === 0) {\r\n      palette = ['black'];\r\n    }\r\n\r\n    const out = [];\r\n    for (let i = 0; i < size; i++) {\r\n      out.push(palette[i % palette.length]);\r\n    }\r\n    return out;\r\n\r\n  }\r\n\r\n  static palette(size: number): string[] {\r\n    // if (true) return BD2ColorPalette.extendPalette(['#1f77b4'], size);\r\n    if (size <= BD2ColorPalette.schemeCategory10.length) {\r\n      return BD2ColorPalette.extendPalette(BD2ColorPalette.schemeCategory10, size);\r\n    } else {\r\n      return BD2ColorPalette.extendPalette(BD2ColorPalette.schemeCategory20, size);\r\n    }\r\n\r\n  }\r\n}\r\n","\r\nexport class SmartRounder {\r\n\r\n  static round(value: number, base?: number): number {\r\n\r\n    base = base || value;\r\n    base = Math.abs(base);\r\n\r\n    if (base < 0.01) {\r\n      return value;\r\n    }\r\n\r\n    if (base < 1) {\r\n      return Math.round(value * 10000) / 10000;\r\n    }\r\n\r\n    if (base < 1000) {\r\n      return Math.round(value * 100) / 100;\r\n    }\r\n    return Math.round(value);\r\n  }\r\n\r\n\r\n}\r\n","import {\r\n  Component, OnInit, Input, AfterViewInit, OnChanges, OnDestroy, NgZone, ChangeDetectorRef,\r\n  ElementRef, SimpleChanges, ChangeDetectionStrategy, EventEmitter, Output\r\n} from '@angular/core';\r\nimport {D3, d3} from '../d3service';\r\n\r\nimport {Selection} from 'd3';\r\nimport {defualtLookAndFeel, GraphicContext, LookAndFeel, offsetScaleValue} from './hbox-plot.dom';\r\nimport {BoxDefinition} from '../hbox-utils/box-dom';\r\nimport {BoxUtil} from '../hbox-utils/box-util';\r\nimport {BD2ColorPalette} from '../hbox-utils/color-palette';\r\nimport {SmartRounder} from '../hbox-utils/smart-rounding';\r\n\r\n\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'bd2-ngx-hbox-plot',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <div class=\"hbox-plot\" [hidden]=\"hidden\"></div>\r\n  `,\r\n  styles: [\r\n      `\r\n      :host /deep/ .axisWrapper path {\r\n        stroke: gray;\r\n      }\r\n\r\n      :host /deep/ .axisWrapper line {\r\n        stroke: gray;\r\n      }\r\n\r\n      :host /deep/ .axisWrapper text {\r\n        fill: gray;\r\n      }\r\n    `\r\n  ]\r\n})\r\nexport class HBoxPlotComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\r\n\r\n  /**\r\n   * Necessary to control hiding of the element, otherwise the BBoxes are not defined and labels\r\n   * were not rendered in correct places.\r\n   *\r\n   */\r\n  @Input()\r\n  hidden = false;\r\n\r\n\r\n  @Input()\r\n  data: number[][];\r\n\r\n  @Input()\r\n  removed: number[] = [];\r\n\r\n  @Input()\r\n  domain: number[] = [17, 36];\r\n\r\n  @Input()\r\n  palette: string[] = [];\r\n\r\n  @Input()\r\n  labels: string[] = [];\r\n\r\n  @Input()\r\n  labelsOn = 'always'; // trigger //null\r\n\r\n  @Input()\r\n  lookAndFeel = defualtLookAndFeel();\r\n\r\n  @Input() // median, label, null\r\n  set sorted(sorting: string) {\r\n\r\n    if (sorting === 'median') {\r\n      this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) => b1.median - b2.median;\r\n    } else if (sorting === 'label') {\r\n      // console.log(\"N\",navigator.language);\r\n      /*if (navigator.language) {\r\n       this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) =>\r\n       b1.label.localeCompare(b2.label, navigator.language, {sensitivity: 'case'});\r\n       } else {\r\n       this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) => b1.label.localeCompare(b2.label);\r\n       };*/\r\n      this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) => {\r\n        if (b1.label === b2.label) {\r\n          return 0;\r\n        }\r\n        if (b1.label < b2.label) {\r\n          return -1;\r\n        }\r\n        return 1;\r\n      };\r\n    } else {\r\n      this.sortFunction = (b1: BoxDefinition, b2: BoxDefinition) => b1.ix - b2.ix;\r\n    }\r\n  }\r\n\r\n\r\n  sortChanged = false;\r\n\r\n  @Output()\r\n  colors = new EventEmitter<string[]>();\r\n\r\n  private d3: D3;\r\n  private parentNativeElement: any;\r\n  private d3Svg: Selection<SVGSVGElement, any, null, undefined>;\r\n  // private removedSVG: Selection<SVGSVGElement, any, null, undefined>;\r\n\r\n  private mainPane: Selection<SVGGElement, any, null, undefined>;\r\n\r\n  private graphicContext = new GraphicContext();\r\n  private boxUtil = new BoxUtil();\r\n\r\n  sortFunction = function(b1: BoxDefinition, b2: BoxDefinition) {\r\n    return b1.ix - b2.ix;\r\n  };\r\n\r\n\r\n  constructor(private ngZone: NgZone, private changeDetectorRef: ChangeDetectorRef, element: ElementRef) {\r\n    this.d3 = d3;\r\n    this.parentNativeElement = element.nativeElement;\r\n\r\n  }\r\n\r\n  /**\r\n   * It is detached from angular to prevent unnecessary change detection\r\n   */\r\n  ngAfterViewInit() {\r\n    this.changeDetectorRef.detach();\r\n    // console.log(\"AFI\");\r\n  }\r\n\r\n  /**\r\n   * Explicit triggers re-drawing as need to have all the parameters set (so will not redrawn if data came frist and domain later)\r\n   * @param changes\r\n   */\r\n  ngOnChanges(changes: SimpleChanges) {\r\n\r\n    // console.log(\"Changes\", changes);\r\n\r\n    // otherwise the hidden on inner div was not updated\r\n    this.changeDetectorRef.detectChanges();\r\n\r\n\r\n    this.initSVG();\r\n\r\n    // this.handleHiding();\r\n\r\n    if (!this.data) {\r\n      return;\r\n    }\r\n\r\n    this.sortChanged = changes.sorted !== undefined;\r\n\r\n    if (!this.hidden) {\r\n      this.updatePlot();\r\n    }\r\n  }\r\n\r\n  isDataUpdate(changes: any): boolean {\r\n\r\n    return (changes.data || changes.removed || changes.domain || changes.palette || changes.labels );\r\n  }\r\n\r\n  initSVG() {\r\n    if (!this.d3Svg) {\r\n      const d3ParentElement = this.d3.select(this.parentNativeElement);\r\n      this.d3Svg = d3ParentElement.select('.hbox-plot').append<SVGSVGElement>('svg');\r\n      this.d3Svg.attr('width', '0');\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    if (this.parentNativeElement !== null) {\r\n\r\n\r\n    } else {\r\n      console.error('Missing parrent element for the component');\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.d3Svg && this.d3Svg.empty && !this.d3Svg.empty()) {\r\n      this.d3Svg.selectAll('*').remove();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Only for testing\r\n   * @param context\r\n   */\r\n  testGraphicContext(context: GraphicContext) {\r\n    this.graphicContext = context;\r\n  }\r\n\r\n  /* Not needed any more, the hidding is achieved by simple div hidden attribute\r\n   // and the problem with labels background rendering is solved using delayed rendering with a timer.\r\n   handleHiding() {\r\n   if (this.hidden) {\r\n   this.removed = this.d3Svg.remove();\r\n   } else {\r\n   if (this.removed) {\r\n   this.d3.select(this.parentNativeElement)\r\n   .select('.hbox-plot')\r\n   .append(() => this.d3Svg.node());\r\n   this.removed = undefined;\r\n   }\r\n   }\r\n\r\n   }*/\r\n\r\n  updatePlot() {\r\n\r\n    // this.graphicContext.transitionTime = this.lookAndFeel.transitionTime;\r\n\r\n    if (this.lookAndFeel.transitionTime > 0) {\r\n      this.graphicContext.transitionOn = true;\r\n      this.ngZone.runOutsideAngular(() => {\r\n        this.graphicContext.transition = (this.d3 as any).transition().duration(this.lookAndFeel.transitionTime);\r\n      });\r\n    } else {\r\n      this.graphicContext.transitionOn = false;\r\n      this.graphicContext.transition = undefined;\r\n    }\r\n\r\n    this.graphicContext = this.updatePalette(this.data, this.palette, this.graphicContext);\r\n\r\n    let boxes = this.prepareDataModel(this.data, this.removed, this.labels, this.graphicContext.palette,\r\n      this.domain, this.sortFunction);\r\n\r\n    boxes = boxes.filter(b => !b.hidden);\r\n\r\n    this.graphicContext = this.preparePane(boxes, this.lookAndFeel, this.graphicContext);\r\n\r\n    this.graphicContext = this.prepareScales(boxes, this.domain, this.lookAndFeel, this.graphicContext);\r\n\r\n    this.graphicContext = this.plotAxisBox(boxes, this.domain, this.lookAndFeel, this.mainPane, this.graphicContext);\r\n\r\n\r\n    this.graphicContext = this.plotDataBoxes(boxes, this.lookAndFeel, this.mainPane, this.graphicContext);\r\n\r\n    this.graphicContext = this.prepareTooltip(this.mainPane, this.graphicContext);\r\n\r\n    this.graphicContext = this.prepareLabels(boxes, this.mainPane, this.lookAndFeel, this.graphicContext, this.labelsOn);\r\n\r\n  }\r\n\r\n  prepareDataModel(data: number[][], removed: number[], labels: string[], palette: string[], domain: number[],\r\n                   sortFunction: (b1: BoxDefinition, b2: BoxDefinition) => number): BoxDefinition[] {\r\n\r\n    let boxes = this.boxUtil.dataToBoxes(data);\r\n\r\n    this.boxUtil.mockEmptyValues(boxes, domain[1]);\r\n    this.labelBoxes(boxes, labels);\r\n\r\n    this.colorBoxes(boxes, palette);\r\n\r\n    removed.forEach(ix => {\r\n      if (boxes[ix]) {\r\n        boxes[ix].hidden = true;\r\n      }\r\n    });\r\n\r\n    boxes = boxes.sort(sortFunction);\r\n    return boxes;\r\n\r\n  }\r\n\r\n\r\n  updatePalette(data: any[], palette: string[], graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (!palette || palette.length === 0) {\r\n      graphicContext.palette = BD2ColorPalette.palette(data.length);\r\n    } else {\r\n      graphicContext.palette = BD2ColorPalette.extendPalette(palette, data.length);\r\n\r\n    }\r\n    this.colors.next(graphicContext.palette.slice());\r\n\r\n    return graphicContext;\r\n  }\r\n\r\n  colorBoxes(boxes: BoxDefinition[], palette: string[]) {\r\n    boxes.forEach(b => b.color = palette[b.ix]);\r\n  }\r\n\r\n\r\n  preparePane(data: any[], lookAndFeel: LookAndFeel, graphicContext: GraphicContext): GraphicContext {\r\n\r\n    // console.log(\"PP\",data);\r\n\r\n    if (!this.mainPane) {\r\n      // let d3ParentElement = this.d3.select(this.parentNativeElement);\r\n      // this.d3Svg = d3ParentElement.select('.hbox-plot').append<SVGSVGElement>('svg');\r\n      this.d3Svg.attr('width', '100%');\r\n\r\n      this.mainPane = this.d3Svg.append<SVGGElement>('g');\r\n      this.mainPane.classed('mainPane', true);\r\n\r\n    }\r\n\r\n    const pWidth = 500;\r\n    const pHeight = this.calculateWorkspaceHeight(data, lookAndFeel) + 2 * lookAndFeel.vMargin;\r\n\r\n    const elm = (graphicContext.transitionOn ? this.d3Svg.transition(graphicContext.transition) : this.d3Svg);\r\n    elm.attr('viewBox', '0 0 ' + pWidth + ' ' + pHeight);\r\n    this.mainPane.attr('transform', 'translate(' + lookAndFeel.hMarginL + ',' + lookAndFeel.vMargin + ')');\r\n    // .attr('transform', 'translate(' + (pWidth / 2) + ',' + (pHeight / 2) + ')'); //moves 0,0 of the pain to the middle of the graphics\r\n\r\n    graphicContext.workspaceWidth = pWidth - lookAndFeel.hMarginL - lookAndFeel.hMarginR;\r\n    graphicContext.workspaceHeight = pHeight - 2 * lookAndFeel.vMargin;\r\n\r\n    return graphicContext;\r\n\r\n  }\r\n\r\n  calculateWorkspaceHeight(data: any[], lookAndFeel: LookAndFeel) {\r\n    return lookAndFeel.rowWidth * data.length;\r\n\r\n  }\r\n\r\n\r\n  labelBoxes(boxes: BoxDefinition[], labels: string[]) {\r\n    if (!labels) {\r\n      labels = [];\r\n    }\r\n\r\n\r\n    boxes.forEach((b, ix) => {\r\n      b.label = labels[ix] ? labels[ix] : '' + (ix + 1);\r\n    });\r\n  }\r\n\r\n  prepareLabels(boxes: BoxDefinition[], mainPane: Selection<SVGGElement, any, null, undefined>, lookAndFeel: LookAndFeel,\r\n                graphicContext: GraphicContext, labelsOn: string): GraphicContext {\r\n\r\n    if (!graphicContext.labelsWrapper) {\r\n      graphicContext.labelsWrapper = mainPane.append<SVGGElement>('g')\r\n        .classed('labelsWrapper', true);\r\n    }\r\n\r\n    if (!graphicContext.backLabelsWrapper) {\r\n      graphicContext.backLabelsWrapper = mainPane.insert<SVGGElement>('g', 'g.dataWrapper')\r\n        .classed('backLabelsWrapper', true);\r\n    }\r\n\r\n    const backLabelsOn = labelsOn === 'always';\r\n    const mainLabelsOn = labelsOn === 'always' || labelsOn === 'trigger';\r\n\r\n\r\n    const labels = graphicContext.labelsWrapper.selectAll('g.yLabel')\r\n      .data(mainLabelsOn ? boxes : [], (d: BoxDefinition) => d.key);\r\n\r\n    labels.exit().remove();\r\n\r\n    const newLabels = labels.enter()\r\n      .append<SVGGElement>('g')\r\n      .classed('yLabel', true);\r\n\r\n    this.ngZone.runOutsideAngular(() => {\r\n      newLabels.on('mouseover', function(evnt: MouseEvent, d: BoxDefinition) {\r\n        d3.select(this)\r\n          .selectAll('.yLabel')\r\n          // .style(\"visibility\", \"visible\");\r\n          .style('display', null);\r\n      }).on('mouseout', function() {\r\n        d3.select(this)\r\n          .selectAll('.yLabel')\r\n          // .style(\"visibility\", \"hidden\");\r\n          .style('display', 'none');\r\n      });\r\n    });\r\n\r\n    newLabels.append<SVGGElement>('rect')\r\n      .attr('class', 'yTrigger')\r\n      .style('fill-opacity', 1)\r\n    ;\r\n\r\n    newLabels.append<SVGGElement>('rect')\r\n      .attr('class', 'yLabel')\r\n      .style('fill-opacity', 0.35)\r\n      // .style(\"visibility\", \"hidden\");\r\n      .style('display', 'none');\r\n\r\n\r\n    newLabels.append<SVGGElement>('text')\r\n      .attr('class', 'yLabel')\r\n      .attr('text-anchor', 'left')\r\n      .attr('dominant-baseline', 'central')\r\n      .style('font-size', lookAndFeel.labelFont)\r\n      .style('opacity', 1)\r\n      .attr('x', 5)\r\n    // .style(\"visibility\", \"hidden\");\r\n    // .style(\"display\", \"none\");\r\n    ;\r\n\r\n    const backLabels = graphicContext.backLabelsWrapper.selectAll('g.yLabel')\r\n      .data(backLabelsOn ? boxes : [], (d: BoxDefinition) => d.key);\r\n\r\n    backLabels.exit().remove();\r\n\r\n    const newBackLabels = backLabels.enter()\r\n      .append<SVGGElement>('g')\r\n      .classed('yLabel', true);\r\n\r\n    /*\r\n     newBackLabels.append<SVGGElement>(\"rect\")\r\n     .attr(\"class\", \"yLabel\")\r\n     .style(\"fill-opacity\", 0.05);\r\n     */\r\n\r\n    newBackLabels.append<SVGGElement>('text')\r\n      .attr('class', 'yLabel')\r\n      .attr('text-anchor', 'left')\r\n      .attr('dominant-baseline', 'central')\r\n      .style('font-size', lookAndFeel.labelFont)\r\n      .style('opacity', lookAndFeel.backLabelOpacity)\r\n      .attr('x', 5);\r\n    // .style(\"visibility\", \"hidden\");\r\n\r\n\r\n    const enterUpdate: Selection<SVGSVGElement, BoxDefinition, null, undefined> =\r\n      newLabels.merge(labels as any) as Selection<SVGSVGElement, BoxDefinition, null, undefined>;\r\n\r\n    const backEnterUpdate: Selection<SVGSVGElement, BoxDefinition, null, undefined> =\r\n      newBackLabels.merge(backLabels as any) as Selection<SVGSVGElement, BoxDefinition, null, undefined>;\r\n\r\n    // called with delay to allow, parent divs to component sets their visibility, otherwise the bboxes cannot be calculated\r\n    // and the labels backgrounds and trigers are not rendered correctly\r\n    // it is a hack, but don't know how to do it correctly\r\n    // timers have to be cleared as otherwise saw errors in logs for fast changing input data (like cause by sorting and pagination)\r\n    graphicContext.labelsTimers.forEach( timer => clearTimeout(timer));\r\n    graphicContext.labelsTimers = [];\r\n    const timer = setTimeout(() => {\r\n\r\n\r\n      const bboxes: SVGRect[] = [];\r\n\r\n      enterUpdate.select<SVGSVGElement>('text')\r\n        .style('display', null)\r\n        .attr('y', d => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth() / 2)\r\n        .text(d => d.label)\r\n        .each(function(d) {\r\n          bboxes.push(this.getBBox());\r\n          // console.log(\"D: \" + d.label, this.getBBox());\r\n        })\r\n        .style('display', 'none');\r\n\r\n\r\n      let elm = backEnterUpdate.select<SVGSVGElement>('text');\r\n      elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n      elm\r\n        .attr('y', d => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth() / 2)\r\n        .text(d => d.label)\r\n      // .style(\"fill\", d => d.color)\r\n      /*.each(function (d) {\r\n       bboxes.push(this.getBBox());\r\n       //console.log(\"D: \" + d.label, this.getBBox());\r\n       });*/\r\n      ;\r\n\r\n      const trigers = enterUpdate.select<SVGSVGElement>('.yTrigger')\r\n        .style('fill', d => d.color)\r\n        .style('stroke', d => d.color);\r\n\r\n\r\n      let telm = trigers.data(bboxes);\r\n      telm = (graphicContext.transitionOn ? telm.transition(graphicContext.transition) : telm) as any;\r\n      telm\r\n        .attr('x', -7)\r\n        .attr('y', b => b.y - 3)\r\n        .attr('width', b => 7)\r\n        .attr('height', b => b.height + 6);\r\n\r\n      const frames = enterUpdate.select<SVGSVGElement>('rect.yLabel')\r\n        .style('fill', d => d.color)\r\n        .style('fill-opacity', lookAndFeel.labelFillOpacity);\r\n\r\n      frames.data(bboxes)\r\n        .attr('x', 0)\r\n        .attr('y', b => b.y - 3)\r\n        .attr('width', b => b.width + 10)\r\n        .attr('height', b => b.height + 7);\r\n\r\n\r\n      /*\r\n       let backFrames = backEnterUpdate.select<SVGSVGElement>(\"rect.yLabel\")\r\n       .style(\"fill\", d => d.color);\r\n\r\n       backFrames.data(bboxes)\r\n       .attr(\"x\", 0)\r\n       .attr(\"y\", b => b.y - 3)\r\n       .attr(\"width\", b => b.width + 10)\r\n       .attr(\"height\", b => b.height + 7);\r\n       */\r\n\r\n    }, 10);\r\n\r\n    graphicContext.labelsTimers.push(timer);\r\n    return graphicContext;\r\n  }\r\n\r\n\r\n  prepareTooltip(mainPane: Selection<SVGGElement, any, null, undefined>, graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (graphicContext.tooltipWrapper) {\r\n      return graphicContext;\r\n    }\r\n\r\n    graphicContext.tooltipWrapper = mainPane.append<SVGGElement>('g')\r\n      .classed('tooltipWrapper', true);\r\n\r\n    graphicContext.tooltipBox = graphicContext.tooltipWrapper.append<SVGGElement>('rect')\r\n      .style('fill', 'white')\r\n      .style('fill-opacity', 0.8)\r\n      .style('stroke', 'grey')\r\n    // .style(\"visibility\", \"hidden\");\r\n    ;\r\n\r\n    graphicContext.tooltipText = graphicContext.tooltipWrapper.append<SVGGElement>('text')\r\n      .attr('class', 'tooltip')\r\n      // .attr(\"text-anchor\", \"left\")\r\n      .attr('text-anchor', 'middle')\r\n      // .attr(\"alignment-baseline\", \"middle\")\r\n      // .attr(\"alignment-baseline\", \"baseline\")\r\n      // .attr(\"dy\", \"-10px\")\r\n      .style('opacity', 1)\r\n    // .attr(\"dx\", \"0.35em\")\r\n    // .style(\"font-size\", this.lookAndFeel.tooltipFontSize) //\"11px\")\r\n    // .style(\"opacity\", 0)\r\n    ;\r\n\r\n    graphicContext.tooltipWrapper\r\n    // .style(\"visibility\", \"hidden\");\r\n      .style('display', 'none');\r\n\r\n    return graphicContext;\r\n  }\r\n\r\n  showTooltip(v: number, x: any, y: any) {\r\n    // console.log(\"Show: \" + v + \";\" + this.constructor.name);\r\n    // console.log('Show: ' + v + '; ' + x + ': ' + y);\r\n    // console.log('v', SmartRounder.round(v));\r\n    // console.log('x', this.graphicContext.xScale(x));\r\n    // console.log('y', this.graphicContext.yScale(y));\r\n\r\n    if (!this.graphicContext.tooltipText) {\r\n      return;\r\n    }\r\n\r\n    this.graphicContext.tooltipText\r\n      .attr('x', this.graphicContext.xScale(x))\r\n      .attr('y', this.graphicContext.yScale(y))\r\n      .text(SmartRounder.round(v))\r\n    // .transition().duration(this.lookAndFeel.baseTransitionsTime / 2)\r\n    // .style('opacity', 1);\r\n    ;\r\n\r\n    // I have to change the display here even before the box is ready as\r\n    // in firefox the getBBox was not working if called with display none\r\n    // giving NS_ERROR_FAILURE 2147500037\r\n    this.graphicContext.tooltipWrapper\r\n      // .style(\"visibility\", \"visible\");\r\n      .style('display', null);\r\n\r\n    const bbox = this.graphicContext.tooltipText.node().getBBox();\r\n\r\n    this.graphicContext.tooltipBox\r\n      .attr('x', bbox.x - 3)\r\n      .attr('y', bbox.y - 2)\r\n      .attr('width', bbox.width + 6)\r\n      .attr('height', bbox.height + 4);\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  hideTooltip() {\r\n    // console.log(\"Hide: \");\r\n    if (!this.graphicContext.tooltipText) {\r\n      return;\r\n    }\r\n\r\n\r\n    this.graphicContext.tooltipWrapper\r\n    // .style(\"visibility\", \"hidden\");\r\n      .style('display', 'none');\r\n\r\n\r\n    // this.graphicContext.tooltipText\r\n    // .transition().duration(this.lookAndFeel.baseTransitionsTime / 2)\r\n    // .style(\"opacity\", 0);\r\n  }\r\n\r\n  prepareScales(data: BoxDefinition[], domain: number[], lookAndFeel: LookAndFeel,\r\n                graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (!graphicContext.xScale) {\r\n      graphicContext.xScale = d3.scaleLinear()\r\n        .clamp(true);\r\n    }\r\n\r\n    graphicContext.xScale\r\n      .domain(domain)\r\n      .range([0, graphicContext.workspaceWidth]);\r\n\r\n    if (!graphicContext.yScale) {\r\n      graphicContext.yScale = d3.scaleBand()\r\n        .padding(lookAndFeel.rowGap)\r\n      ;\r\n    }\r\n\r\n    const domainY = data.map((d) => d.key);\r\n\r\n    graphicContext.yScale\r\n      .domain(domainY)\r\n      .range([0, graphicContext.workspaceHeight]);\r\n\r\n\r\n    return graphicContext;\r\n  }\r\n\r\n  plotAxisBox(data: BoxDefinition[], domain: number[], lookAndFeel: LookAndFeel, mainPane: Selection<SVGGElement, any, null, undefined>,\r\n              graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (!graphicContext.axisWrapper) {\r\n      graphicContext.axisWrapper = this.initAxisWrapper(mainPane);\r\n    }\r\n\r\n    graphicContext = this.plotHorizontalScales(domain, lookAndFeel, graphicContext);\r\n    graphicContext = this.plotVerticalScales(data, lookAndFeel, graphicContext);\r\n\r\n    return graphicContext;\r\n\r\n  }\r\n\r\n  initAxisWrapper(mainPane: Selection<SVGGElement, any, null, undefined>): Selection<SVGGElement, any, null, undefined> {\r\n\r\n    let wrapper = mainPane.select<SVGGElement>('.axisWrapper');\r\n    if (wrapper.size() === 0) {\r\n      wrapper = mainPane.append<SVGGElement>('g').attr('class', 'axisWrapper');\r\n\r\n      wrapper.append('g').attr('class', 'xTopAxis');\r\n      wrapper.append('g').attr('class', 'xBottomAxis');\r\n      wrapper.append('g').attr('class', 'yLeftAxis');\r\n      wrapper.append('g').attr('class', 'yRightAxis');\r\n\r\n    }\r\n    return wrapper;\r\n  }\r\n\r\n  plotHorizontalScales(domain: number[], lookAndFeel: LookAndFeel, graphicContext: GraphicContext): GraphicContext {\r\n\r\n\r\n    if (!graphicContext.xTopAxis) {\r\n      graphicContext.xTopAxis = d3.axisTop(graphicContext.xScale);\r\n    }\r\n\r\n    if (!graphicContext.xBottomAxis) {\r\n      graphicContext.xBottomAxis = d3.axisBottom(graphicContext.xScale);\r\n    }\r\n\r\n\r\n    graphicContext.axisWrapper\r\n      .select('g.xTopAxis')\r\n      .call(graphicContext.xTopAxis);\r\n\r\n    let elm = graphicContext.axisWrapper.select('g.xBottomAxis') as any;\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm);\r\n    elm\r\n      .attr('transform', 'translate(0,' + graphicContext.workspaceHeight + ')')\r\n      .call(graphicContext.xBottomAxis);\r\n\r\n    return graphicContext;\r\n\r\n  }\r\n\r\n  plotVerticalScales(data: BoxDefinition[], lookAndFeel: LookAndFeel, graphicContext: GraphicContext): GraphicContext {\r\n\r\n\r\n    if (!graphicContext.yLeftAxis) {\r\n      graphicContext.yLeftAxis = d3.axisLeft(graphicContext.yScale)\r\n        .tickFormat(() => '')\r\n      ;\r\n    }\r\n\r\n    if (!graphicContext.yRightAxis) {\r\n      graphicContext.yRightAxis = d3.axisRight(graphicContext.yScale)\r\n        .tickValues([])\r\n      ;\r\n    }\r\n\r\n    let elm = graphicContext.axisWrapper.select('g.yLeftAxis') as any;\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm);\r\n    elm\r\n      .call(graphicContext.yLeftAxis);\r\n\r\n\r\n    elm = graphicContext.axisWrapper.select('g.yRightAxis')\r\n      .attr('transform', 'translate(' + graphicContext.workspaceWidth + ',0)') as any;\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm);\r\n    elm\r\n      .call(graphicContext.yRightAxis);\r\n\r\n    return graphicContext;\r\n\r\n  }\r\n\r\n\r\n  plotDataBoxes(boxes: BoxDefinition[], lookAndFeel: LookAndFeel, mainPane: Selection<SVGGElement, any, null, undefined>,\r\n                graphicContext: GraphicContext): GraphicContext {\r\n\r\n    if (!graphicContext.dataWrapper) {\r\n      graphicContext.dataWrapper = mainPane.append<SVGGElement>('g').attr('class', 'dataWrapper');\r\n    }\r\n\r\n\r\n\r\n    let boxWidgets = graphicContext.dataWrapper.selectAll('.boxWidget') as Selection<SVGGElement, BoxDefinition, null, undefined>;\r\n\r\n    boxWidgets = boxWidgets.data(boxes, d => d.key);\r\n\r\n\r\n    this.updateBoxWidgets(boxWidgets, lookAndFeel, graphicContext);\r\n\r\n    const newBoxWidgets = boxWidgets.enter()\r\n      .append<SVGGElement>('g').attr('class', 'boxWidget');\r\n\r\n\r\n    this.createBoxWidgets(newBoxWidgets, lookAndFeel, graphicContext);\r\n\r\n    boxWidgets.exit().remove();\r\n\r\n\r\n    return graphicContext;\r\n  }\r\n\r\n  updateBoxWidgets(boxWidgets: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n                   lookAndFeel: LookAndFeel, graphicContext: GraphicContext) {\r\n\r\n    // this.ngZone.runOutsideAngular(() => {\r\n\r\n    boxWidgets.select('rect.backdrop')\r\n      .call(this.positionBackdrop, graphicContext);\r\n\r\n    this.updateWhiskers(boxWidgets.select('g.whiskers') as any, graphicContext);\r\n\r\n    boxWidgets.select('g.box rect')\r\n      .call(this.positionBoxRectangle, graphicContext);\r\n\r\n    boxWidgets.select('g.box line.medianline')\r\n      .call(this.positionMedianLine, graphicContext);\r\n\r\n    boxWidgets.select('g.box line.meanline')\r\n      .call(this.positionMeanLine, graphicContext);\r\n\r\n    const out = boxWidgets.select('g.outliers').selectAll('.outlier')\r\n      .data(d => d.outliers.map(x => [x, d.key, d.color]));\r\n\r\n    out.enter()\r\n      .call(this.createOutlier, lookAndFeel, graphicContext, this.positionOutlier);\r\n\r\n    out.call(this.positionOutlier, graphicContext);\r\n\r\n    out.exit().remove();\r\n\r\n    // });\r\n\r\n  }\r\n\r\n\r\n  positionBackdrop(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x', (d) => offsetScaleValue(d.lowWskr, -5, graphicContext.xScale))\r\n      .attr('y', (d) => {\r\n        return graphicContext.yScale(d.key);\r\n      })\r\n      .attr('width', (d) => {\r\n        const x1 = offsetScaleValue(d.lowWskr, -5, graphicContext.xScale);\r\n        const x2 = offsetScaleValue(d.highWskr, +5, graphicContext.xScale);\r\n        return x2 - x1;\r\n      })\r\n      .attr('height', (d) => {\r\n        return graphicContext.yScale.bandwidth();\r\n      })\r\n    // .style(\"stroke\", d => d.color)\r\n    // .style(\"fill\", d => d.color)\r\n    ;\r\n\r\n  }\r\n\r\n  positionBoxRectangle(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x', (d) => graphicContext.xScale(d.fstQnt))\r\n      .attr('y', (d) => {\r\n        return graphicContext.yScale(d.key);\r\n      })\r\n      .attr('width', (d) => (graphicContext.xScale(d.thrdQnt) - graphicContext.xScale(d.fstQnt)))\r\n      .attr('height', (d) => {\r\n        return graphicContext.yScale.bandwidth();\r\n      })\r\n      .style('stroke', d => d.color)\r\n      .style('fill', d => d.color);\r\n\r\n  }\r\n\r\n  positionMedianLine(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x1', (d, i) => graphicContext.xScale(d.median))\r\n      .attr('y1', (d, i) => graphicContext.yScale(d.key))\r\n      .attr('x2', (d, i) => graphicContext.xScale(d.median))\r\n      .attr('y2', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth())\r\n      .style('stroke', d => d.color)\r\n      // .style(\"visibility\", d => d.mean === d.median ? \"hidden\" : \"visible\");\r\n      .style('display', d => d.mean === d.median ? 'none' : null);\r\n\r\n\r\n\r\n  }\r\n\r\n  positionMeanLine(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x1', (d, i) => graphicContext.xScale(d.mean))\r\n      .attr('y1', (d, i) => graphicContext.yScale(d.key))\r\n      .attr('x2', (d, i) => graphicContext.xScale(d.mean))\r\n      .attr('y2', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth())\r\n      .style('stroke', d => d.color);\r\n  }\r\n\r\n  positionOutlier(elm: Selection<SVGGElement, any, null, undefined>, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm.attr('cx', d => graphicContext.xScale(d[0]))\r\n      .attr('cy', d => graphicContext.yScale(d[1]) + graphicContext.yScale.bandwidth() / 2)\r\n      .style('stroke', d => d[2])\r\n      .style('fill', d => d[2]);\r\n\r\n  }\r\n\r\n\r\n  createOutlier(elm: Selection<SVGGElement, any, null, undefined>, lookAndFeel: LookAndFeel, graphicContext: GraphicContext,\r\n                positionOutlierFunction: (elm: Selection<SVGGElement, any, null, undefined>, graphicContext: GraphicContext) => {}) {\r\n\r\n\r\n    elm\r\n      .append<SVGGElement>('circle')\r\n      .attr('class', 'outlier')\r\n      .attr('r', lookAndFeel.outliersCircleRadius)\r\n      .style('stroke-width', lookAndFeel.outliersStrokeWidth)\r\n      .style('fill-opacity', lookAndFeel.outliersFillOpacity)\r\n      .call(positionOutlierFunction, graphicContext)\r\n    ;\r\n\r\n  }\r\n\r\n  positionWhiskerLine(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, left: boolean, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x1', (d, i) => left ? graphicContext.xScale(d.lowWskr) : graphicContext.xScale(d.thrdQnt))\r\n      .attr('y1', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth() / 2)\r\n      .attr('x2', (d, i) => left ? graphicContext.xScale(d.fstQnt) : graphicContext.xScale(d.highWskr))\r\n      .attr('y2', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth() / 2)\r\n      .style('stroke', d => d.color)\r\n      // .style(\"visibility\", d => (left && (d.lowWskr === d.fstQnt)) || (!left && (d.highWskr === d.thrdQnt)) ? \"hidden\" : \"visible\");\r\n      .style('display', d => (left && (d.lowWskr === d.fstQnt)) || (!left && (d.highWskr === d.thrdQnt)) ? 'none' : null);\r\n\r\n\r\n  }\r\n\r\n  positionWhiskerTip(elm: Selection<SVGGElement, BoxDefinition, null, undefined>, left: boolean, graphicContext: GraphicContext) {\r\n\r\n    elm = (graphicContext.transitionOn ? elm.transition(graphicContext.transition) : elm) as any;\r\n    elm\r\n      .attr('x1', (d, i) => left ? graphicContext.xScale(d.lowWskr) : graphicContext.xScale(d.highWskr))\r\n      .attr('y1', (d, i) => graphicContext.yScale(d.key))\r\n      .attr('x2', (d, i) => left ? graphicContext.xScale(d.lowWskr) : graphicContext.xScale(d.highWskr))\r\n      .attr('y2', (d, i) => graphicContext.yScale(d.key) + graphicContext.yScale.bandwidth())\r\n      .style('stroke', d => d.color)\r\n      // .style(\"visibility\", d => (left && (d.lowWskr === d.fstQnt)) || (!left && (d.highWskr === d.thrdQnt)) ? \"hidden\" : \"visible\");\r\n      .style('display', d => (left && (d.lowWskr === d.fstQnt)) || (!left && (d.highWskr === d.thrdQnt)) ? 'none' : null);\r\n\r\n\r\n\r\n  }\r\n\r\n  updateWhiskers(whiskers: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n                 graphicContext: GraphicContext) {\r\n\r\n    whiskers.select('line.whiskerlineL')\r\n      .call(this.positionWhiskerLine, true, graphicContext);\r\n\r\n    whiskers.select('line.whiskerlineR')\r\n      .call(this.positionWhiskerLine, false, graphicContext);\r\n\r\n    whiskers.select('line.whiskertipL')\r\n      .call(this.positionWhiskerTip, true, graphicContext);\r\n\r\n    whiskers.select('line.whiskertipR')\r\n      .call(this.positionWhiskerTip, false, graphicContext);\r\n\r\n  }\r\n\r\n  createWhiskers(whiskers: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n                 lookAndFeel: LookAndFeel, graphicContext: GraphicContext) {\r\n\r\n\r\n    const lwhiskr = whiskers.append('line')\r\n      .attr('class', 'whiskerlineL')\r\n      .style('stroke-width', lookAndFeel.whiskerStrokeWidth)\r\n      .style('stroke-dasharray', '4 3')\r\n      .call(this.positionWhiskerLine, true, graphicContext)\r\n    ;\r\n    const rwhiskr = whiskers.append('line')\r\n      .attr('class', 'whiskerlineR')\r\n      .style('stroke-width', lookAndFeel.whiskerStrokeWidth)\r\n      .style('stroke-dasharray', '4 3')\r\n      .call(this.positionWhiskerLine, false, graphicContext)\r\n    ;\r\n\r\n    const lTip = whiskers.append('line')\r\n      .attr('class', 'whiskertipL')\r\n      .style('stroke-width', lookAndFeel.whiskerStrokeWidth)\r\n      .call(this.positionWhiskerTip, true, graphicContext)\r\n    ;\r\n\r\n    const rTip = whiskers.append('line')\r\n      .attr('class', 'whiskertipR')\r\n      .style('stroke-width', lookAndFeel.whiskerStrokeWidth)\r\n      .call(this.positionWhiskerTip, false, graphicContext)\r\n    ;\r\n\r\n\r\n  }\r\n\r\n  createBoxes(widgets: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n              lookAndFeel: LookAndFeel, graphicContext: GraphicContext) {\r\n\r\n\r\n    const rect = widgets.append('rect')\r\n      .attr('class', 'box')\r\n      .style('stroke-width', lookAndFeel.boxStrokeWidth)\r\n      .style('fill-opacity', lookAndFeel.boxFillOpacity)\r\n      .call(this.positionBoxRectangle, graphicContext);\r\n\r\n\r\n    const median = widgets.append('line')\r\n      .attr('class', 'medianline')\r\n      .style('stroke-width', lookAndFeel.boxStrokeWidth)\r\n      .call(this.positionMedianLine, graphicContext);\r\n\r\n    const instance = this;\r\n\r\n    this.ngZone.runOutsideAngular(() => {\r\n      rect.on('mouseover', function(evnt: MouseEvent, d: BoxDefinition) {\r\n        instance.showTooltip(d.median, d.median, d.key);\r\n      })\r\n        .on('mouseout', function() {\r\n          instance.hideTooltip();\r\n        });\r\n\r\n      median.on('mouseover', function(evnt: MouseEvent, d: BoxDefinition) {\r\n        instance.showTooltip(d.median, d.median, d.key);\r\n      })\r\n        .on('mouseout', function() {\r\n          instance.hideTooltip();\r\n        });\r\n\r\n    });\r\n\r\n    const mean = widgets\r\n      .append('line')\r\n      .attr('class', 'meanline')\r\n      .style('stroke-width', lookAndFeel.meanStrokeWidth)\r\n      .style('stroke-dasharray', '4 2')\r\n      .call(this.positionMeanLine, graphicContext)\r\n    ;\r\n\r\n    // has to be outside angular, to prevent detection\r\n    this.ngZone.runOutsideAngular(() => {\r\n      mean\r\n        .on('mouseover', function(evnt: MouseEvent, d: BoxDefinition) {\r\n          instance.showTooltip(d.mean, d.mean, d.key);\r\n        })\r\n        .on('mouseout', function() {\r\n          instance.hideTooltip();\r\n        });\r\n\r\n    });\r\n\r\n  }\r\n\r\n  createBoxWidgets(newBoxWidgets: Selection<SVGGElement, BoxDefinition, null, undefined>,\r\n                   lookAndFeel: LookAndFeel, graphicContext: GraphicContext) {\r\n\r\n    // this.ngZone.runOutsideAngular(() => {\r\n\r\n    const instance = this;\r\n\r\n    const backdrops = newBoxWidgets.append<SVGGElement>('rect').attr('class', 'backdrop')\r\n    // .style(\"stroke-width\", lookAndFeel.boxStrokeWidth)\r\n      .style('fill-opacity', lookAndFeel.backdropOpacity)\r\n      .style('fill', lookAndFeel.backdropColor)\r\n      .call(this.positionBackdrop, graphicContext);\r\n\r\n\r\n    const whiskers = newBoxWidgets.append<SVGGElement>('g').attr('class', 'whiskers');\r\n\r\n    this.createWhiskers(whiskers, lookAndFeel, graphicContext);\r\n\r\n    const boxes = newBoxWidgets.append<SVGGElement>('g').attr('class', 'box');\r\n    this.createBoxes(boxes, lookAndFeel, graphicContext);\r\n\r\n\r\n    const outliers = newBoxWidgets.append<SVGGElement>('g').attr('class', 'outliers');\r\n\r\n\r\n    outliers.selectAll('.outlier')\r\n      .data(d => d.outliers.map(x => [x, d.key, d.color]))\r\n      .enter()\r\n      .call(this.createOutlier, lookAndFeel, graphicContext, this.positionOutlier)\r\n    ;\r\n\r\n    // });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport {HBoxPlotComponent} from './hbox-plot/hbox-plot.component';\n\n\n\n@NgModule({\n  declarations: [HBoxPlotComponent],\n  imports: [\n  ],\n  exports: [HBoxPlotComponent]\n})\nexport class BD2NgxHBoxplotModule { }\n","/*\n * Public API Surface of bd2-ngx-hboxplot\n */\n\nexport * from './lib/hbox-plot/hbox-plot.component';\nexport * from './lib/bd2-ngx-hboxplot.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["d3lib","EventEmitter","Component","ChangeDetectionStrategy","NgZone","ChangeDetectorRef","ElementRef","Input","Output","NgModule"],"mappings":"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"}